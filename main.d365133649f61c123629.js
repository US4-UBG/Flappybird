(()=>{var t={75:function(t){(function(){var i,e,s,n,h,a;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(t.exports=function(){return(i()-h)/1e6},e=process.hrtime,n=(i=function(){var t;return 1e9*(t=e())[0]+t[1]})(),a=1e9*process.uptime(),h=n-a):Date.now?(t.exports=function(){return Date.now()-s},s=Date.now()):(t.exports=function(){return(new Date).getTime()-s},s=(new Date).getTime())}).call(this)},87:(t,i,e)=>{for(var s=e(75),n="undefined"==typeof window?e.g:window,h=["moz","webkit"],a="AnimationFrame",o=n["request"+a],r=n["cancel"+a]||n["cancelRequest"+a],c=0;!o&&c<h.length;c++)o=n[h[c]+"Request"+a],r=n[h[c]+"Cancel"+a]||n[h[c]+"CancelRequest"+a];if(!o||!r){var d=0,u=0,l=[];o=function(t){if(0===l.length){var i=s(),e=Math.max(0,16.666666666666668-(i-d));d=e+i,setTimeout((function(){var t=l.slice(0);l.length=0;for(var i=0;i<t.length;i++)if(!t[i].cancelled)try{t[i].callback(d)}catch(t){setTimeout((function(){throw t}),0)}}),Math.round(e))}return l.push({handle:++u,callback:t,cancelled:!1}),u},r=function(t){for(var i=0;i<l.length;i++)l[i].handle===t&&(l[i].cancelled=!0)}}t.exports=function(t){return o.call(n,t)},t.exports.cancel=function(){r.apply(n,arguments)},t.exports.polyfill=function(t){t||(t=n),t.requestAnimationFrame=o,t.cancelAnimationFrame=r}}},i={};function e(s){var n=i[s];if(void 0!==n)return n.exports;var h=i[s]={exports:{}};return t[s].call(h.exports,h,h.exports,e),h.exports}e.n=t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return e.d(i,{a:i}),i},e.d=(t,i)=>{for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),e.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var i=e.g.document;if(!t&&i&&(i.currentScript&&(t=i.currentScript.src),!t)){var s=i.getElementsByTagName("script");s.length&&(t=s[s.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),(()=>{"use strict";var t={};e.r(t),e.d(t,{cubicBezier:()=>U,easeOut:()=>G,easeOutCirc:()=>H,easeOutExpo:()=>N,linear:()=>P,quadratic:()=>M,sineWaveHS:()=>F,swing:()=>R});const i=e.p+"1f82ae5350be3039bfb3fe84ce4c4f89.png",s=(t,i)=>{const e={width:0,height:0};return"width"in i?(e.width=i.width,e.height=t.height/t.width*i.width):"height"in i&&(e.height=i.height,e.width=t.width*i.height/t.height),e};class n{constructor(t){this.__source=t,this.ready=0}eventTracking(t,i){this.ready--,this.ready<1&&t({source:this.source,object:i})}get source(){return this.__source}}class h extends n{}class a extends h{test(){return a.regexp.test(this.source)}load(){return this.ready=2,new Promise(((t,i)=>{const e=new Audio;e.addEventListener("load",(()=>{this.eventTracking(t,e)})),e.addEventListener("canplay",(()=>{this.eventTracking(t,e)})),e.addEventListener("canplaythrough",(()=>{this.eventTracking(t,e)})),e.addEventListener("error",i),e.src=this.source}))}}a.regexp=/\.(mp3|wav|ogg|aac)/i;class o extends h{test(){return o.regexp.test(this.source)}load(){return this.ready=1,new Promise(((t,i)=>{const e=new Image;e.addEventListener("load",(()=>{this.eventTracking(t,e)})),e.addEventListener("error",i),e.src=this.source}))}}o.regexp=/\.(jpe?g|png|svg|bmp|webp|webm|gif)/i;class r{constructor(t){this.callback=()=>{};const i=t.map((t=>{for(const i of r.loaders){const e=new i(t);if(e.test())return e.load()}throw new Error("No available driver for file: "+t)}));Promise.all(i).then((t=>{t.forEach((t=>{r.assets.set(t.source,t.object)})),this.callback()})).catch((t=>{console.error(t)}))}then(t){this.callback=t}static get(t){return r.assets.get(t)}}r.assets=new Map,r.loaders=[a,o];const c=r.get,d=(t,i,e)=>t+(i-t)*e,u=(t,i,e)=>Math.max(Math.min(e,i),t),l=(t,i)=>Math.floor(Math.random()*(i-t))+t,g=(t,i)=>{const e=(new Date).getTime();return Math.sin(e/1e3*2*Math.PI/(1/t))*i},p=(t,i,e)=>i-(e-t),m=.0062,w={width:288,height:512},y={width:34,height:24},v={width:100,height:300},b={width:24,height:36};class f{constructor(t,i){f.audioContext=new(AudioContext||webkitAudioContext),f.audioContext.addEventListener("statechange",(()=>{f.isReady="running"===f.audioContext.state})),f.load(t,i)}static play(t,i=(()=>{})){if(void 0===typeof f.Cached[t])throw new TypeError(`Key ${t} does not load or not exists.`);if(void 0!==f.gainContext){if(f.isReady)try{const e=f.audioContext.createBufferSource();e.buffer=f.Cached[t],e.addEventListener("ended",(()=>i())),e.connect(f.gainContext),e.start()}catch(i){throw new Error(`Failed to play audio: ${t}. Error: ${i}`)}}else console.warn("WebSfx.play cannot execute. AudioContext is not started or resumed")}static volume(t){if(void 0!==f.gainContext)try{f.gainContext.gain.value=t}catch(t){}else console.warn("WebSfx.volume cannot set volume. AudioContext is not started or resumed")}static async init(){if(f.isReady&&void 0!==f.gainContext)return;await f.audioContext.resume();const t=f.audioContext.createGain();t.connect(f.audioContext.destination),f.gainContext=t}static load(t,i,e=0){const s=[],n=Object.entries(t);for(let t=e*f.concurrentDownload;t<Math.min(n.length,f.concurrentDownload);t++){if(!/\.(wav|ogg|mp3)$/i.test(n[t][1]))throw new TypeError("WebSfx.contructor accepts 'wav|ogg|mp3' type of files");s.push(f.load_requests(n[t][0],n[t][1]))}Promise.allSettled(s).then((s=>{s.forEach((t=>{"fulfilled"===t.status&&(f.Cached[t.value.name]=t.value.content,f.Cached[t.value.path]=f.Cached[t.value.name])})),n.length>(e+1)*f.concurrentDownload?f.load(t,i,e+1):i(f.Cached)}))}static load_requests(t,i){return new Promise((async(e,s)=>{try{const s=await fetch(i,{method:"GET",mode:"no-cors"});if(!s.ok)throw new TypeError(`Erro while fetching '${i}`);const n=await s.arrayBuffer();e({content:await f.audioContext.decodeAudioData(n),path:i,name:t})}catch(t){s()}}))}}f.Cached={},f.concurrentDownload=5,f.isReady=!1;class x{constructor(){this.canvasSize={width:0,height:0},this.velocity={x:0,y:0},this.coordinate={x:0,y:0}}resize({width:t,height:i}){this.canvasSize={width:t,height:i}}}class S{constructor(t){this.sprite=t,this.ctx=S.Canvas.getContext("2d"),this.loading=[],this.cb_modify=(t,i)=>Promise.resolve(i)}then(t){Promise.all(this.loading).then((i=>{i.forEach((({name:t,img:i})=>S.cached.set(t,i))),t()}))}static asset(t){if(S.cached.has(t))return S.cached.get(t);throw new TypeError(`Key: ${t} does not defined on SpriteDestructor`)}modify(t){this.cb_modify=t}cutOut(t,i,e,s,n){S.Canvas.width=s,S.Canvas.height=n,this.ctx.clearRect(0,0,s,n),this.ctx.imageSmoothingEnabled=!1,this.ctx.imageSmoothingQuality="high",this.ctx.drawImage(this.sprite,i,e,s,n,0,0,s,n),this.feedImage(t)}feedImage(t){this.loading.push(new Promise(((i,e)=>{const s=new Image;s.src=S.Canvas.toDataURL(),s.addEventListener("load",(async()=>{i({name:t,img:await this.cb_modify(t,s)})})),s.addEventListener("error",(t=>e(t)))})))}}S.Canvas=document.createElement("canvas"),S.cached=new Map;const z=S.asset;class I{static get background(){if(I.bgThemeList.length<1)throw new Error("No theme available");const t=I.bgThemeList[l(0,I.bgThemeList.length)];return I.isNight="night"===t,t}static get bird(){if(I.birdColorList.length<1)throw new Error("No available bird color");return I.birdColorList[l(0,I.birdColorList.length)]}static get pipe(){if(I.pipeColorList.length<1)throw new Error("No available pipe color");return I.isNight?I.pipeColorList[l(0,I.pipeColorList.length)]:"green"}}I.birdColorList=[],I.bgThemeList=[],I.pipeColorList=[],I.isNight=!1;class O extends x{constructor(){super(),this.images=new Map,this.theme="day",this.velocity.x=2e-4,this.backgroundSize={width:0,height:0}}init(){this.images.set("day",z("theme-day")),this.images.set("night",z("theme-night")),Object.assign(I.bgThemeList,["day","night"]),this.use(I.background)}reset(){this.coordinate={x:0,y:0},this.resize(this.canvasSize),this.use(I.background)}use(t){this.theme=t}resize({width:t,height:i}){super.resize({width:t,height:i}),this.backgroundSize=s({width:this.images.get(this.theme).width,height:this.images.get(this.theme).height},{height:i})}Update(){this.coordinate.x+=this.canvasSize.width*this.velocity.x,this.coordinate.y+=this.velocity.y}Display(t){const{width:i,height:e}=this.backgroundSize,{x:s,y:n}=this.coordinate,h=Math.ceil(this.canvasSize.width/i)+1,a=s%i;for(let s=0;s<h;s++)t.drawImage(this.images.get(this.theme),s*i-a,n,i,e)}}class E extends x{constructor(){super(),this.images=new Map,this.color="green",this.hollSize=0,this.pipePosition={top:{x:0,y:0},bottom:{x:0,y:0}},this.isPassed=!1,this.velocity.x=m,this.scaled={top:{width:0,height:0},bottom:{width:0,height:0}}}init(){this.images.set("green.top",z("pipe-green-top")),this.images.set("green.bottom",z("pipe-green-bottom")),this.images.set("red.top",z("pipe-red-top")),this.images.set("red.bottom",z("pipe-red-bottom")),Object.assign(I.pipeColorList,["red","green"])}setHollPosition(t){this.hollSize=.184*this.canvasSize.height,this.coordinate=t}resize({width:t,height:i}){const e=this.coordinate.x/this.canvasSize.width*100,n=this.coordinate.y/this.canvasSize.height*100;super.resize({width:t,height:i});const h=.18*this.canvasSize.width;E.pipeSize=s(v,{width:h}),this.hollSize=.184*this.canvasSize.height,this.coordinate.x=t*(e/100),this.coordinate.y=i*(n/100),this.velocity.x=t*m,this.scaled.top=s({width:this.images.get(`${this.color}.top`).width,height:this.images.get(`${this.color}.top`).height},{width:h}),this.scaled.bottom=s({width:this.images.get(`${this.color}.bottom`).width,height:this.images.get(`${this.color}.bottom`).height},{width:h})}isOut(){return this.coordinate.x+E.pipeSize.width<0}use(t){this.color=t}Update(){this.coordinate.x-=this.velocity.x}Display(t){const i=E.pipeSize.width/2,e=this.coordinate.x,s=this.coordinate.y,n=this.hollSize/2;t.drawImage(this.images.get(`${this.color}.top`),e-i,-(this.scaled.top.height-Math.abs(s-n)),this.scaled.top.width,this.scaled.top.height),t.drawImage(this.images.get(`${this.color}.bottom`),e-i,s+n,this.scaled.bottom.width,this.scaled.bottom.height)}}E.pipeSize={width:0,height:0};const k=e.p+"fb85655698a54f8cde03153d61436a8e.ogg",A=e.p+"53be63225a77062f0e0567615aaef471.ogg",C=e.p+"25b7658563967e60ca23fb51af9c084f.ogg",B=e.p+"09f7e99dce7a2d12b43909f45bcff6f2.ogg",D=e.p+"06f58df2486e5ade890cf491a58b4e35.ogg";class _{static async init(){await f.init()}static volume(t){_.currentVolume=t}static die(){f.volume(_.currentVolume),f.play(k)}static point(){f.volume(_.currentVolume),f.play(C)}static hit(t){f.volume(_.currentVolume),f.play(A,t)}static swoosh(){f.volume(_.currentVolume),f.play(B)}static wing(){f.volume(_.currentVolume),f.play(D)}}_.currentVolume=1;class L extends x{constructor(){super(),this.color="yellow",this.images=new Map,this.force=0,this.scaled={width:0,height:0},this.max_fall_velocity=0,this.max_lift_velocity=0,this.score=0,this.rotation=0,this.causeOfDeath=0,this.flags=1,this.lastCoord=0,this.wingState=1}init(){this.images.set("yellow.0",z("bird-yellow-up")),this.images.set("yellow.1",z("bird-yellow-mid")),this.images.set("yellow.2",z("bird-yellow-down")),this.images.set("blue.0",z("bird-blue-up")),this.images.set("blue.1",z("bird-blue-mid")),this.images.set("blue.2",z("bird-blue-down")),this.images.set("red.0",z("bird-red-up")),this.images.set("red.1",z("bird-red-mid")),this.images.set("red.2",z("bird-red-down")),Object.assign(I.birdColorList,["yellow","red","blue"]),this.use(I.bird)}variableReset(){this.score=0,this.rotation=0,this.causeOfDeath=0,this.flags=1,this.lastCoord=0,this.wingState=1}reset(){this.variableReset(),this.resize(this.canvasSize),this.use(I.bird)}get alive(){return 0!=(this.flags&L.FLAG_IS_ALIVE)}resize({width:t,height:i}){super.resize({width:t,height:i}),this.coordinate.y=.5*L.platformHeight,this.coordinate.x=.3*t,this.force=-.009*i,this.scaled=s(y,{height:.024*i}),this.max_fall_velocity=.0141*this.canvasSize.height,this.max_lift_velocity=-.3*this.canvasSize.height}doWave({x:t,y:i},e,s){this.flapWing(3),i+=g(e,s),this.coordinate={x:t,y:i}}flapWing(t){this.wingState=1+g(t,2)|0,this.rotation>70&&(this.wingState=1)}flap(){this.coordinate.y<0||0==(this.flags&L.FLAG_IS_ALIVE)||(_.wing(),this.velocity.y=this.force,this.lastCoord=this.coordinate.y)}doesHitTheFloor(){return this.coordinate.y+this.rotatedDimension().height>Math.abs(this.canvasSize.height-L.platformHeight)}isDead(t){if(this.doesHitTheFloor())return this.flags&=~L.FLAG_IS_ALIVE,this.causeOfDeath=1,0==(this.flags&L.FLAG_IS_ALIVE);const i=this.rotatedDimension(),e=i.width-i.height/2;for(const s of t)try{const t=s.coordinate.x,n=s.coordinate.y,h=s.hollSize/2,a=E.pipeSize.width/2;if(t+a<this.coordinate.x-e)continue;if(Math.abs(t-a)<=this.coordinate.x+e&&(t<this.coordinate.x&&!s.isPassed&&(this.score++,_.point(),s.isPassed=!0),Math.abs(n-h)>=this.coordinate.y-i.height||n+h<=this.coordinate.y+i.height)){this.flags&=~L.FLAG_IS_ALIVE,this.causeOfDeath=2;break}break}catch(t){}return 0==(this.flags&L.FLAG_IS_ALIVE)}rotatedDimension(){const t=this.rotation*Math.PI/180,i=this.scaled.width/2,e=this.scaled.height/2,s=Math.sin(t),n=Math.cos(t);return{width:2*Math.sqrt(Math.pow(i*n,2)+Math.pow(e*s,2)),height:2*Math.sqrt(Math.pow(i*s,2)+Math.pow(e*n,2))}}playDead(){0==(this.flags&L.FLAG_DIED)&&(this.flags|=L.FLAG_DIED,2===this.causeOfDeath&&_.die())}use(t){this.color=t}handleRotation(){if(this.rotation+=this.coordinate.y<this.lastCoord?-7.2:6.5,this.rotation=u(-19,90,this.rotation),0==(this.flags&L.FLAG_IS_ALIVE))return void(this.wingState=1);const t=Math.abs(-19),i=4+(this.rotation+t)/(t+90)*3.2;this.flapWing(p(4,8.2,i))}Update(){if(this.doesHitTheFloor()||0!=(this.flags&L.FLAG_DOES_LANDED))return this.flags|=L.FLAG_DOES_LANDED,this.coordinate.y=this.canvasSize.height-L.platformHeight-this.rotatedDimension().height,void this.handleRotation();this.coordinate.y+=u(this.max_lift_velocity,this.max_fall_velocity,this.velocity.y),this.velocity.y+=47e-5*this.canvasSize.height,this.handleRotation()}Display(t){const i=`${this.color}.${this.wingState}`;t.save(),t.translate(this.coordinate.x,this.coordinate.y),t.rotate(this.rotation*Math.PI/180),t.drawImage(this.images.get(i),-this.scaled.width,-this.scaled.height,2*this.scaled.width,2*this.scaled.height),t.restore()}}L.FLAG_IS_ALIVE=1,L.FLAG_DIED=2,L.FLAG_DOES_LANDED=4,L.platformHeight=0;class T{constructor(){this.isComplete=!1,this.isRunning=!1,this.startTime=0}get time(){return performance.now()}get timeDiff(){return this.isRunning?this.time-this.startTime:0}stop(){this.isComplete=!0,this.isRunning=!1}start(){this.isRunning||(this.isRunning=!0,this.isComplete=!1,this.startTime=this.time)}reset(){this.isComplete=!1,this.isRunning=!1}}const R=t=>.5-Math.cos(t*Math.PI)/2,P=t=>t,M=t=>Math.pow(t,2),U=t=>t<=.5?2*Math.pow(t,3):1-2*Math.pow(t,3),G=t=>.5-Math.cos(t*Math.PI)/2,F=t=>Math.sin(2*t*Math.PI/2),H=t=>Math.sqrt(1-Math.pow(t-1,2)),N=t=>1===t?1:1-Math.pow(2,-10*t);class $ extends T{constructor(t){super(),this.options={duration:500,transition:"swing"},Object.assign(this.options,t??{})}get status(){return{running:this.isRunning,complete:this.isComplete}}inUseTransition(i){return t[this.options.transition](i)}}class W extends ${get value(){if(this.isComplete||!this.isRunning)return 0;const t=this.timeDiff/this.options.duration;return t>=1?(this.stop(),0):this.inUseTransition(p(0,1,t))}}class j extends T{constructor(t){super(),this.options={duration:500,from:{x:0,y:0},to:{x:0,y:0},transition:"cubicBezier"},Object.assign(this.options,t)}get status(){return{running:this.isRunning,complete:this.isComplete}}inUseTransition(i){return t[this.options.transition](i)}}class V extends j{get value(){if(!this.isRunning)return this.isComplete?this.options.to:this.options.from;const t=this.options.from,i=this.options.to,e=this.timeDiff/this.options.duration;return e>=1?(this.stop(),this.options.to):{x:d(t.x,i.x,this.inUseTransition(e)),y:d(t.y,i.y,this.inUseTransition(e))}}}class q extends T{constructor(t){super(),this.options={durations:{fading:400,bounce:1e3}},Object.assign(this.options,t)}get status(){return{running:this.isRunning,complete:this.isComplete}}get value(){if(!this.isRunning)return{opacity:this.isComplete?1:0,value:0};const{fading:t,bounce:i}=this.options.durations,e=this.timeDiff;let s=R(e/t),n=-F(e/i);return e>=Math.max(t,i)?(this.stop(),{opacity:1,value:0}):(e>=t&&(s=1),e>=i&&(n=0),{opacity:s,value:n})}}class X extends T{constructor(t){super(),this.options={diff:100},Object.assign(this.options,t)}get status(){return{running:this.isRunning,complete:this.isComplete}}get value(){return this.timeDiff>=this.options.diff&&(this.startTime=this.time,!0)}}const Y={x:.5,y:.515},Q={x:.5,y:.328};class J extends x{constructor(){super(),this.instructImage={size:.4,position:{x:0,y:0},image:void 0,scaled:{width:0,height:0}},this.getReadyImage={size:.65,position:{x:0,y:0},image:void 0,scaled:{width:0,height:0}},this.fadeOut=new W({transition:"linear"}),this.opacity=1,this.isComplete=!1,this.doesTap=!1}init(){this.instructImage.image=z("banner-instruction"),this.getReadyImage.image=z("banner-game-ready")}reset(){this.opacity=1,this.isComplete=!1,this.doesTap=!1}tap(){this.isComplete||(this.fadeOut.start(),this.isComplete=!0,this.doesTap=!0)}resize({width:t,height:i}){super.resize({width:t,height:i}),this.instructImage.scaled=s({width:this.instructImage.image.width,height:this.instructImage.image.height},{width:t*this.instructImage.size}),this.getReadyImage.scaled=s({width:this.getReadyImage.image.width,height:this.getReadyImage.image.height},{width:t*this.getReadyImage.size});const e=Y,n=Q;this.instructImage.position.x=t*e.x-this.instructImage.scaled.width/2,this.instructImage.position.y=i*e.y-this.instructImage.scaled.height/2,this.getReadyImage.position.x=t*n.x-this.getReadyImage.scaled.width/2,this.getReadyImage.position.y=i*n.y-this.getReadyImage.scaled.height/2}Update(){this.doesTap?this.opacity=this.fadeOut.value:this.opacity=1}Display(t){this.opacity<=0||(t.globalAlpha=this.opacity,t.drawImage(this.getReadyImage.image,this.getReadyImage.position.x,this.getReadyImage.position.y,this.getReadyImage.scaled.width,this.getReadyImage.scaled.height),t.drawImage(this.instructImage.image,this.instructImage.position.x,this.instructImage.position.y,this.instructImage.scaled.width,this.instructImage.scaled.height),t.globalAlpha=1)}}class K extends x{constructor(){super(),this.currentValue=0,this.numberAsset={},this.numberDimension={width:0,height:0}}init(){this.setInitAsset(0,"number-lg-0"),this.setInitAsset(1,"number-lg-1"),this.setInitAsset(2,"number-lg-2"),this.setInitAsset(3,"number-lg-3"),this.setInitAsset(4,"number-lg-4"),this.setInitAsset(5,"number-lg-5"),this.setInitAsset(6,"number-lg-6"),this.setInitAsset(7,"number-lg-7"),this.setInitAsset(8,"number-lg-8"),this.setInitAsset(9,"number-lg-9")}setInitAsset(t,i){this.numberAsset[String(t)]=z(i)}setNum(t){this.currentValue=t}resize({width:t,height:i}){super.resize({width:t,height:i}),this.numberDimension=s(b,{height:.065*i}),this.coordinate.x=.5*this.canvasSize.width,this.coordinate.y=.18*this.canvasSize.height}Update(){}Display(t){const i=String(this.currentValue).split(""),e=i.length*this.numberDimension.width;let s=this.coordinate.x-e/2;const n=this.coordinate.y-this.numberDimension.height/2;i.forEach((i=>{t.drawImage(this.numberAsset[i],s,n,this.numberDimension.width,this.numberDimension.height),s+=this.numberDimension.width}))}}class Z extends x{constructor({style:t,strong:i,interval:e,easing:s}){super(),this.strong=i,this.style=t,this.events=[],this.fadeEvent=new W({duration:e,transition:s}),this.value=0}init(){}reset(){this.fadeEvent.reset();for(const t of this.events)t.isCalled=!1}start(){this.fadeEvent.start()}setEvent(t,i){this.events.push({range:{min:t[0],max:t[1]},callback:i,isCalled:!1})}get status(){return{...this.fadeEvent.status,value:this.value}}Update(){if(!this.status.complete||this.status.running){this.value=this.fadeEvent.value;for(const t of this.events)t.isCalled||t.range.min<=this.value&&t.range.max>=this.value&&(t.callback(),t.isCalled=!0)}else this.value=0}Display(t){t.globalAlpha=this.strong*this.value,t.fillStyle=this.style,t.fillRect(0,0,this.canvasSize.width,this.canvasSize.height),t.fill(),t.globalAlpha=1}}class tt extends x{constructor(){super(),this.images=new Map,this.timingEvent=new X({diff:200}),this.scaled={width:0,height:0},this.dimension={width:0,height:0},this.target={x:0,y:0},this.status="stopped",this.sparkList=[],this.currentSparkIndex=0}init(){this.images.set("spark-sm",z("spark-sm")),this.images.set("spark-md",z("spark-md")),this.images.set("spark-lg",z("spark-lg")),this.sparkList=["spark-sm","spark-md","spark-lg","spark-md","spark-sm"]}resize({width:t,height:i}){super.resize({width:t,height:i}),this.scaled=s({width:this.images.get("spark-lg").width,height:this.images.get("spark-lg").height},{width:.03*t})}doSpark(){"running"!==this.status&&(this.status="running",this.timingEvent.start())}stop(){this.status="stopped",this.timingEvent.reset()}relocate(){this.target.x=l(this.coordinate.x,this.coordinate.x+this.dimension.width),this.target.y=l(this.coordinate.y,this.coordinate.y+this.dimension.height)}move({x:t,y:i},e){this.coordinate={x:t,y:i},this.dimension=e}Update(){"stopped"!==this.status&&this.timingEvent.value&&(this.currentSparkIndex>this.sparkList.length-2?(this.currentSparkIndex=0,this.relocate()):this.currentSparkIndex++)}Display(t){"stopped"!==this.status&&t.drawImage(this.images.get(this.sparkList[this.currentSparkIndex]),Math.abs(this.target.x-this.scaled.width/2),Math.abs(this.target.y-this.scaled.height/2),this.scaled.width,this.scaled.height)}}class it{constructor(){this.coordinate={x:0,y:0},this.calcCoord={x:0,y:0},this.dimension={width:0,height:0},this.canvasSize={width:0,height:0},this.additionalTranslate={x:0,y:0},this.touchStart={x:0,y:0},this.active=!1,this.img=void 0,this.hoverState=!1,this.initialWidth=0}get isHovered(){return this.hoverState}resize({width:t,height:i}){void 0!==this.img&&(this.dimension=s({width:this.img.width,height:this.img.height},{width:d(0,t,this.initialWidth)})),this.canvasSize={width:t,height:i}}Update(){this.calcCoord.x=d(0,this.canvasSize.width,this.coordinate.x)+this.additionalTranslate.x,this.calcCoord.y=d(0,this.canvasSize.height,this.coordinate.y)+this.additionalTranslate.y}mouseEvent(t,{x:i,y:e}){"down"===t?this.onMouseDown({x:i,y:e}):"up"===t&&this.onMouseup({x:i,y:e})}reset(){this.move({x:0,y:0})}move({x:t,y:i}){this.additionalTranslate.x=d(0,this.canvasSize.width,t),this.additionalTranslate.y=d(0,this.canvasSize.height,i)}isInRange({x:t,y:i}){const e=this.calcCoord.x,s=this.calcCoord.y,n=this.dimension.width/2,h=this.dimension.height/2;return e-n<t&&e+n>t&&s-h<i&&s+h>i}onMouseDown(t){this.active&&(this.touchStart=t,this.isInRange(t)&&(this.hoverState=!0))}onMouseup(t){this.active&&(this.hoverState=!1,this.isInRange(t)&&this.isInRange(this.touchStart)&&this.click())}}class et extends it{constructor(){super(),this.initialWidth=.38,this.coordinate={x:.259,y:.6998},this.active=!0,this.callback=()=>{}}click(){_.swoosh(),this.callback()}onClick(t){this.callback=t}init(){this.img=z("btn-play")}Update(){this.reset(),this.isHovered&&this.move({x:0,y:.004}),super.Update()}Display(t){const i=this.calcCoord.x,e=this.calcCoord.y,s=this.dimension.width/2,n=this.dimension.height/2;t.drawImage(this.img,i-s,e-n,2*s,2*n)}}class st extends et{constructor(){super(),this.coordinate.x=.741}init(){this.img=z("btn-ranking")}}class nt{constructor(){(nt.sk??[]).length<1&&(nt.sk=["brrrrrrrrrrr"]),nt.sk=nt.utoa(nt.sk[0]),nt.isAvailable=!1;try{"localStorage"in window&&"object"==typeof window.localStorage&&(nt.isAvailable=!0)}catch(t){nt.isAvailable=!1}}static utoa(t){return btoa(unescape(encodeURIComponent(t)))}static atou(t){return decodeURIComponent(escape(atob(t)))}static save(t,i){if(!nt.isAvailable)return void console.warn("Storage is not available");let e=typeof i;"string"!=typeof i&&(i=String(i)),window.localStorage.setItem(`__${nt.sk}_${t}__`,nt.utoa(JSON.stringify({mode:e,value:i})))}static get(t){if(nt.isAvailable)try{const i=JSON.parse(nt.atou(window.localStorage.getItem(`__${nt.sk}_${t}__`)));if(i.mode)switch(i.mode){case"string":return i.value??"";case"number":return Number(i.value??0);case"boolean":return!(!i.value||"true"!==i.value)}return}catch(t){return void console.error("Failed to fetch highscore")}else console.warn("Storage is not available")}}nt.sk=window.location.href.toString().match(/([a-zA-Z\-]+\.github\.io\/[a-zA-Z\-\.]+\/)/i);class ht extends x{constructor(){super(),this.flags=0,this.images=new Map,this.playButton=new et,this.rankingButton=new st,this.spark=new tt,this.currentHighScore=0,this.currentGeneratedNumber=0,this.currentScore=0,this.FlyInAnim=new V({duration:500,from:{x:.5,y:1.5},to:{x:.5,y:.438},transition:"easeOutExpo"}),this.TimingEventAnim=new X({diff:30}),this.BounceInAnim=new q({durations:{bounce:300,fading:100}})}init(){this.images.set("banner-gameover",z("banner-game-over")),this.images.set("score-board",z("score-board")),this.images.set("coin-10",z("coin-dull-bronze")),this.images.set("coin-20",z("coin-dull-metal")),this.images.set("coin-30",z("coin-shine-gold")),this.images.set("coin-40",z("coin-shine-silver")),this.images.set("new-icon",z("toast-new"));for(let t=0;t<10;++t)this.images.set(`number-${t}`,z(`number-md-${t}`));this.rankingButton.init(),this.playButton.init(),this.playButton.active=!1,this.rankingButton.active=!1,this.spark.init();const t=nt.get("highscore");this.currentHighScore="number"==typeof t?t:0}resize({width:t,height:i}){super.resize({width:t,height:i}),this.rankingButton.resize(this.canvasSize),this.playButton.resize(this.canvasSize),this.spark.resize(this.canvasSize)}Update(){this.rankingButton.Update(),this.playButton.Update(),this.spark.Update()}Display(t){if(0!=(this.flags&ht.FLAG_SHOW_BANNER)){const i=s({width:this.images.get("banner-gameover").width,height:this.images.get("banner-gameover").height},{width:.7*this.canvasSize.width}),e=this.BounceInAnim.value,n=.225*this.canvasSize.height-i.height/2;t.globalAlpha=e.opacity,t.drawImage(this.images.get("banner-gameover"),.5*this.canvasSize.width-i.width/2,n+e.value*(.015*this.canvasSize.height),i.width,i.height),t.globalAlpha=1}if(0!=(this.flags&ht.FLAG_SHOW_SCOREBOARD)){const i=s({width:this.images.get("score-board").width,height:this.images.get("score-board").height},{width:.85*this.canvasSize.width}),e=Object.assign({},this.FlyInAnim.value);e.x=this.canvasSize.width*e.x-i.width/2,e.y=this.canvasSize.height*e.y-i.height/2,t.drawImage(this.images.get("score-board"),e.x,e.y,i.width,i.height),this.TimingEventAnim.value&&this.currentScore>this.currentGeneratedNumber&&this.currentGeneratedNumber++,this.TimingEventAnim.status.complete&&!this.TimingEventAnim.status.running&&(this.currentGeneratedNumber>this.currentHighScore&&(this.setHighScore(this.currentGeneratedNumber),this.flags|=ht.FLAG_NEW_HIGH_SCORE),this.addMedal(t,e,i),this.showButtons()),this.displayScore(t,e,i),this.displayBestScore(t,e,i,0!=(this.flags&ht.FLAG_NEW_HIGH_SCORE)),this.FlyInAnim.status.complete&&!this.FlyInAnim.status.running&&(this.TimingEventAnim.start(),this.currentGeneratedNumber===this.currentScore&&this.TimingEventAnim.stop())}0!=(this.flags&ht.FLAG_SHOW_BUTTONS)&&(this.rankingButton.Display(t),this.playButton.Display(t))}showBanner(){this.flags|=ht.FLAG_SHOW_BANNER,this.BounceInAnim.start()}showBoard(){this.flags|=ht.FLAG_SHOW_SCOREBOARD,this.FlyInAnim.start(),this.spark.doSpark()}showButtons(){this.flags|=ht.FLAG_SHOW_BUTTONS,this.playButton.active=!0,this.rankingButton.active=!0}setHighScore(t){nt.save("highscore",t),this.currentHighScore=t}setScore(t){this.currentScore=t}addMedal(t,i,e){if(this.currentScore<10)return;let n;n=this.currentScore>=10&&this.currentScore<20?this.images.get("coin-10"):this.currentScore>=20&&this.currentScore<30?this.images.get("coin-20"):Math.floor(this.currentScore/10)%2==0?this.images.get("coin-40"):this.images.get("coin-30");const h=s({width:n.width,height:n.height},{width:.1878*e.width}),a={x:.36*(i.x+e.width/2),y:.9196*(i.y+e.height/2)};t.drawImage(n,a.x,a.y,h.width,h.height),this.spark.move(a,h),this.spark.Display(t)}displayScore(t,i,e){const n=s({width:this.images.get("number-1").width,height:this.images.get("number-1").height},{width:.05*e.width});(i=Object.assign({},i)).x=1.565*(i.x+e.width/2),i.y=.864*(i.y+e.height/2),String(this.currentGeneratedNumber).split("").reverse().forEach(((e,s)=>{t.drawImage(this.images.get(`number-${e}`),i.x-s*(n.width+5),i.y,n.width,n.height)}))}displayBestScore(t,i,e,n){const h=s({width:this.images.get("number-1").width,height:this.images.get("number-1").height},{width:.05*e.width});if((i=Object.assign({},i)).x=1.565*(i.x+e.width/2),i.y=1.074*(i.y+e.height/2),String(this.currentHighScore).split("").reverse().forEach(((e,s)=>{t.drawImage(this.images.get(`number-${e}`),i.x-s*(h.width+5),i.y,h.width,h.height)})),0==(this.flags&ht.FLAG_NEW_HIGH_SCORE))return;const a=s({width:this.images.get("new-icon").width,height:this.images.get("new-icon").height},{width:.14*e.width});t.drawImage(this.images.get("new-icon"),.73*i.x,.922*i.y,a.width,a.height)}hide(){this.flags=0,this.playButton.active=!1,this.rankingButton.active=!1,this.currentGeneratedNumber=0,this.FlyInAnim.reset(),this.BounceInAnim.reset(),this.TimingEventAnim.reset(),this.spark.stop()}onRestart(t){this.playButton.onClick(t)}onShowRanks(t){}mouseDown({x:t,y:i}){this.playButton.mouseEvent("down",{x:t,y:i}),this.rankingButton.mouseEvent("down",{x:t,y:i})}mouseUp({x:t,y:i}){this.playButton.mouseEvent("up",{x:t,y:i}),this.rankingButton.mouseEvent("up",{x:t,y:i})}}ht.FLAG_SHOW_BANNER=1,ht.FLAG_SHOW_SCOREBOARD=2,ht.FLAG_SHOW_BUTTONS=4,ht.FLAG_NEW_HIGH_SCORE=8;class at extends x{constructor(t){super(),this.state="waiting",this.bird=new L,this.count=new K,this.game=t,this.pipeGenerator=this.game.pipeGenerator,this.bannerInstruction=new J,this.gameState="none",this.scoreBoard=new ht,this.transition=new Z({interval:500,strong:1,style:"black",easing:"sineWaveHS"}),this.flashScreen=new Z({style:"white",interval:180,strong:.7,easing:"linear"}),this.hideBird=!1,this.showScoreBoard=!1,this.transition.setEvent([.99,1],this.reset.bind(this))}init(){this.bird.init(),this.count.init(),this.bannerInstruction.init(),this.scoreBoard.init(),this.setButtonEvent(),this.flashScreen.init(),this.transition.init()}reset(){this.gameState="none",this.state="waiting",this.game.background.reset(),this.game.platform.reset(),this.pipeGenerator.reset(),this.bannerInstruction.reset(),this.game.bgPause=!1,this.hideBird=!1,this.showScoreBoard=!1,this.scoreBoard.hide(),this.bird.reset()}resize({width:t,height:i}){super.resize({width:t,height:i}),this.bird.resize(this.canvasSize),this.count.resize(this.canvasSize),this.bannerInstruction.resize(this.canvasSize),this.scoreBoard.resize(this.canvasSize),this.flashScreen.resize(this.canvasSize),this.transition.resize(this.canvasSize)}Update(){if(this.flashScreen.Update(),this.transition.Update(),this.scoreBoard.Update(),!this.bird.alive)return this.game.bgPause=!0,void this.bird.Update();"waiting"!==this.state?(this.bannerInstruction.Update(),this.pipeGenerator.Update(),this.bird.Update(),this.bird.isDead(this.pipeGenerator.pipes)&&(this.flashScreen.reset(),this.flashScreen.start(),this.gameState="died",window.setTimeout((()=>{this.scoreBoard.setScore(this.bird.score),this.showScoreBoard=!0,window.setTimeout((()=>{this.scoreBoard.showBoard(),_.swoosh()}),700),this.scoreBoard.showBanner(),_.swoosh()}),500),_.hit((()=>{this.bird.playDead()})))):this.bird.doWave({x:this.bird.coordinate.x,y:.48*this.canvasSize.height},1,6)}Display(t){"playing"!==this.state&&"waiting"!==this.state||(this.bannerInstruction.Display(t),"died"===this.gameState&&this.showScoreBoard||(this.count.setNum(this.bird.score),this.count.Display(t)),this.hideBird||this.bird.Display(t),this.scoreBoard.Display(t)),this.flashScreen.Display(t),this.transition.Display(t)}setButtonEvent(){this.scoreBoard.onRestart((()=>{this.transition.status.running||(this.transition.reset(),this.transition.start())}))}click({x:t,y:i}){"died"!==this.gameState&&(this.state="playing",this.gameState="playing",this.bannerInstruction.tap(),this.bird.flap())}mouseDown({x:t,y:i}){"died"===this.gameState&&this.scoreBoard.mouseDown({x:t,y:i})}mouseUp({x:t,y:i}){"died"===this.gameState&&this.scoreBoard.mouseUp({x:t,y:i})}}class ot extends et{constructor(){super(),this.initialWidth=.24,this.coordinate.x=.5,this.coordinate.y=.53}init(){this.img=z("btn-rate")}click(){Object.assign(document.createElement("a"),{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/jxmked/Flappybird"}).click()}}class rt extends x{constructor(){super(),this.bird=new L,this.playButton=new et,this.rankingButton=new st,this.rateButton=new ot,this.flappyBirdBanner=void 0,this.copyright=void 0}init(){this.bird.init(),this.playButton.init(),this.rankingButton.init(),this.rateButton.init(),this.flappyBirdBanner=z("banner-flappybird"),this.copyright=z("copyright")}resize({width:t,height:i}){super.resize({width:t,height:i}),this.bird.resize({width:t,height:i}),this.playButton.resize({width:t,height:i}),this.rankingButton.resize({width:t,height:i}),this.rateButton.resize({width:t,height:i})}Update(){this.bird.doWave({x:.5*this.canvasSize.width,y:.4*this.canvasSize.height},1.4,9),this.playButton.Update(),this.rankingButton.Update(),this.rateButton.Update()}Display(t){this.playButton.Display(t),this.rankingButton.Display(t),this.rateButton.Display(t),this.bird.Display(t);const i=s({width:this.flappyBirdBanner.width,height:this.flappyBirdBanner.height},{width:.67*this.canvasSize.width});t.drawImage(this.flappyBirdBanner,.5*this.canvasSize.width-i.width/2,.28*this.canvasSize.height-i.height/2,i.width,i.height);const e=s({width:this.copyright.width,height:this.copyright.height},{width:.44*this.canvasSize.width});t.drawImage(this.copyright,.5*this.canvasSize.width-e.width/2,.806*this.canvasSize.height-e.height/2,e.width,e.height),this.insertAppVersion(t)}insertAppVersion(t){const i=.04*this.canvasSize.width,e=.985*this.canvasSize.height,s=.985*this.canvasSize.width;t.font=`bold ${i}px monospace`,t.textAlign="center",t.fillStyle="#8E8E93",t.fillText("v0.2.11",s-2*i,e)}mouseDown({x:t,y:i}){this.playButton.mouseEvent("down",{x:t,y:i}),this.rankingButton.mouseEvent("down",{x:t,y:i}),this.rateButton.mouseEvent("down",{x:t,y:i})}mouseUp({x:t,y:i}){this.playButton.mouseEvent("up",{x:t,y:i}),this.rankingButton.mouseEvent("up",{x:t,y:i}),this.rateButton.mouseEvent("up",{x:t,y:i})}}class ct{constructor(){this.range={max:0,min:0},this.width=0,this.pipes=[],this.distance=0,this.initialXPos=0,this.canvasSize={width:0,height:0},this.pipeColor="green"}reset(){this.pipes.splice(0,this.pipes.length),this.resize({max:this.range.max,width:this.canvasSize.width,height:this.canvasSize.height}),this.pipeColor=I.pipe}resize({max:t,width:i,height:e}){this.range={max:t,min:.194*e},this.distance=.392*i,this.width=i,this.canvasSize={width:i,height:e};for(const t of this.pipes)t.resize(this.canvasSize)}needPipe(){const t=this.pipes.length;return 0===t?(this.initialXPos=2*(this.width+E.pipeSize.width),!0):this.distance<=this.width-this.pipes[t-1].coordinate.x&&(this.initialXPos=this.width+E.pipeSize.width,!0)}generate(){return{position:{x:this.initialXPos,y:l(this.range.min,this.range.max-this.range.min)}}}Update(){if(this.needPipe()){const t=new E;t.init(),t.use(this.pipeColor),t.resize(this.canvasSize),t.setHollPosition(this.generate().position),this.pipes.push(t)}for(let t=0;t<this.pipes.length;t++)this.pipes[t].Update(),this.pipes[t].isOut()&&(this.pipes.splice(t,1),t--)}}class dt extends x{constructor(){super(),this.velocity.x=m,this.platformSize={width:0,height:0},this.img=void 0}init(){this.img=z("platform")}reset(){this.coordinate={x:0,y:0},this.resize(this.canvasSize)}resize({width:t,height:i}){super.resize({width:t,height:i}),this.platformSize=s({width:this.img.width,height:this.img.height},{height:i/4}),this.coordinate.y=i-this.platformSize.height}Update(){this.coordinate.x+=this.canvasSize.width*this.velocity.x,this.coordinate.y+=this.velocity.y}Display(t){const{width:i,height:e}=this.platformSize,{x:s,y:n}=this.coordinate,h=Math.ceil(this.canvasSize.width/i)+1,a=s%i;for(let s=0;s<h;s++)t.drawImage(this.img,s*i-a,n,i,e)}}class ut{constructor(){this.objects=new Map,this.currentState=""}setState(t){this.currentState=t}register(t,i){this.objects.set(t,i)}Update(){const t=this.objects.get(this.currentState);if(void 0===t)throw new TypeError(`State ${this.currentState} does not exists`);t.Update()}Display(t){const i=this.objects.get(this.currentState);if(void 0===i)throw new TypeError(`State ${this.currentState} does not exists`);i.Display(t)}}const lt=e.p+"7f96a0d8e670fc5b3ccf1ffb977043d2.png";var gt=e(87),pt=e.n(gt);const mt=document.createElement("canvas"),wt=document.createElement("img"),yt=document.querySelector("#main-canvas"),vt=yt.getContext("2d"),bt=document.querySelector("#loading-modal"),ft=new class extends x{constructor(t){super(),this.screenChanger=new ut,this.background=new O,this.canvas=t,this.context=this.canvas.getContext("2d",{desynchronized:!0,alpha:!1}),this.platform=new dt,this.pipeGenerator=new ct,this.screenIntro=new rt,this.gamePlay=new at(this),this.state="intro",this.bgPause=!1,this.transition=new Z({interval:700,strong:1,style:"black",easing:"sineWaveHS"}),this.transition.setEvent([.98,1],(()=>{this.state="game"}))}init(){new nt,this.background.init(),this.platform.init(),this.transition.init(),_.init(),_.volume(1),this.screenIntro.init(),this.gamePlay.init(),this.setEvent(),this.screenIntro.playButton.active=!0,this.screenIntro.rankingButton.active=!0,this.screenIntro.rateButton.active=!0,this.screenChanger.register("intro",this.screenIntro),this.screenChanger.register("game",this.gamePlay)}reset(){this.background.reset(),this.platform.reset(),this.Resize(this.canvasSize)}Resize({width:t,height:i}){super.resize({width:t,height:i}),this.background.resize(this.canvasSize),this.platform.resize(this.canvasSize),this.transition.resize(this.canvasSize),L.platformHeight=this.platform.platformSize.height,this.pipeGenerator.resize({max:i-this.platform.platformSize.height,width:t,height:i}),this.screenIntro.resize(this.canvasSize),this.gamePlay.resize(this.canvasSize),this.canvas.width=t,this.canvas.height=i}Update(){this.transition.Update(),this.screenChanger.setState(this.state),this.bgPause||(this.background.Update(),this.platform.Update()),this.screenChanger.Update()}Display(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.imageSmoothingEnabled=!1,this.context.imageSmoothingQuality="high",this.screenChanger.setState(this.state),this.background.Display(this.context);for(const t of this.pipeGenerator.pipes)t.Display(this.context);this.platform.Display(this.context),this.screenChanger.Display(this.context),this.transition.Display(this.context)}setEvent(){this.screenIntro.playButton.onClick((()=>{"intro"===this.state&&(this.screenIntro.playButton.active=!1,this.screenIntro.rankingButton.active=!1,this.screenIntro.rateButton.active=!1,this.transition.reset(),this.transition.start())}))}onClick({x:t,y:i}){"game"===this.state&&this.gamePlay.click({x:t,y:i})}mouseDown({x:t,y:i}){this.screenIntro.mouseDown({x:t,y:i}),this.gamePlay.mouseDown({x:t,y:i})}mouseUp({x:t,y:i}){this.screenIntro.mouseUp({x:t,y:i}),this.gamePlay.mouseUp({x:t,y:i})}}(mt),xt=new class{constructor(t){this.fps=0,this.timeArray=[],this.context=t,this.containerOpacity=.4,this.textProps={position:{x:0,y:0},preText:"",postText:""},this.containerProps={startingPoint:{x:0,y:0},endPoint:{x:0,y:0}}}text(t,i,e){this.textProps.position=t,this.textProps.preText=i,this.textProps.postText=e}container(t,i){this.containerProps={startingPoint:t,endPoint:i}}mark(){const t=performance.now();for(;this.timeArray.length>0&&this.timeArray[0]<=t-1e3;)this.timeArray.shift();this.timeArray.push(t),this.fps=this.timeArray.length,this.drawContainer(),this.drawText(String(this.fps))}drawContainer(){const t=this.context,{startingPoint:i,endPoint:e}=this.containerProps;t.beginPath(),t.globalAlpha=this.containerOpacity,t.fillStyle="#1e1e20",t.fillRect(i.x,i.y,e.x,e.y),t.fill(),t.closePath()}drawText(t){const i=this.context,{preText:e,postText:s,position:n}=this.textProps,h=`${e}${t}${s}`;i.beginPath(),i.globalAlpha=1,i.font="30px monospace",i.fillStyle="#58d130",i.textAlign="left",i.fillText(h,n.x,n.y),i.closePath()}}(ft.context);let St=!1;wt.src=i,xt.text({x:50,y:50},""," Cycle"),xt.container({x:10,y:10},{x:230,y:70});const zt=()=>{vt.drawImage(mt,0,0),ft.Update(),ft.Display(),pt()(zt)},It=()=>{const t=s(w,{height:2*window.innerHeight-50});yt.style.maxWidth=String(t.width/2)+"px",yt.style.maxHeight=String(t.height/2)+"px",yt.height=t.height,yt.width=t.width,mt.height=t.height,mt.width=t.width,console.log(`Canvas Size: ${t.width}x${t.height}`),ft.Resize(t)},Ot=()=>{((t,i)=>{let e=!1,s=!1,n=!0;const h={down:!1,position:{x:0,y:0}},a=({x:t,y:e})=>{const{left:s,top:n,width:h,height:a}=i.getBoundingClientRect();return{x:(t-s)/h*i.width,y:(e-n)/a*i.height}},o=({x:t,y:i},e)=>{e.preventDefault(),h.position=a({x:t,y:i})},r=({x:i,y:o},r,c)=>{n||(n=!0,s=!1,f.init(),r.preventDefault(),c||(h.position=a({x:i,y:o})),t.mouseUp(h.position),h.down=!1,e=!1)},c=({x:i,y:o},r)=>{s||(n=!1,s=!0,f.init(),r.preventDefault(),h.position=a({x:i,y:o}),t.mouseDown(h.position),h.down=!0,h.down&&(e||(t.onClick(h.position),e=!0)))};i.addEventListener("mousedown",(t=>{let i=t.clientX,e=t.clientY;c({x:i,y:e},t)})),i.addEventListener("mouseup",(t=>{let i=t.clientX,e=t.clientY;r({x:i,y:e},t,!1)})),i.addEventListener("mousemove",(t=>{let i=t.clientX,e=t.clientY;o({x:i,y:e},t)})),i.addEventListener("touchstart",(t=>{let i=t.touches[0].clientX,e=t.touches[0].clientY;c({x:i,y:e},t)})),i.addEventListener("touchend",(t=>{if(t.touches.length<1)return void r(h.position,t,!0);let i=t.touches[0].clientX,e=t.touches[0].clientY;r({x:i,y:e},t,!1)})),i.addEventListener("touchmove",(t=>{let i=t.touches[0].clientX,e=t.touches[0].clientY;o({x:i,y:e},t)})),document.addEventListener("keydown",(t=>{const{key:e,keyCode:s,code:n}=t;" "!==e&&32!==s&&"Space"!==n&&"Enter"!==e&&13!==s&&"NumpadEnter"!==n&&"Enter"!==n||c({x:i.width/2,y:i.height/2},t)})),document.addEventListener("keyup",(t=>{const{key:e,keyCode:s,code:n}=t;" "!==e&&32!==s&&"Space"!==n&&"Enter"!==e&&13!==s&&"NumpadEnter"!==n&&"Enter"!==n||r({x:i.width/2,y:i.height/2},t,!1)}))})(ft,yt),bt.style.display="none",document.body.style.backgroundColor="rgba(28, 28, 30, 1)"};window.addEventListener("DOMContentLoaded",(()=>{bt.insertBefore(wt,bt.childNodes[0]),(t=>{let i=!1;new r([lt]).then((()=>{const e=new S(c(lt)),s=document.createElement("canvas"),n=s.getContext("2d");e.modify(((t,i)=>"pipe-red-top"!==t?Promise.resolve(i):new Promise(((t,e)=>{const h=new Image;h.addEventListener("load",(()=>t(h))),h.addEventListener("error",(()=>e())),s.width=i.width,s.height=i.height,n.clearRect(0,0,i.width,i.height),n.imageSmoothingEnabled=!1,n.imageSmoothingQuality="high",n.translate(0,i.height),n.scale(1,-1),n.drawImage(i,0,0),h.src=s.toDataURL()})))),e.cutOut("theme-day",0,0,288,512),e.cutOut("theme-night",292,0,288,512),e.cutOut("platform",584,0,236,112),e.cutOut("pipe-red-bottom",0,646,52,320),e.cutOut("pipe-red-top",56,646,52,320),e.cutOut("pipe-green-bottom",168,646,52,320),e.cutOut("pipe-green-top",112,646,52,320),e.cutOut("score-board",4,516,232,123),e.cutOut("coin-dull-metal",224,906,44,44),e.cutOut("coin-dull-bronze",224,954,44,44),e.cutOut("coin-shine-silver",242,516,44,44),e.cutOut("coin-shine-gold",242,564,44,44),e.cutOut("number-sm-0",276,646,12,14),e.cutOut("number-sm-1",282,664,6,14),e.cutOut("number-sm-2",276,698,12,14),e.cutOut("number-sm-3",276,716,12,14),e.cutOut("number-sm-4",276,750,12,14),e.cutOut("number-sm-5",276,768,12,14),e.cutOut("number-sm-6",276,802,12,14),e.cutOut("number-sm-7",276,820,12,14),e.cutOut("number.sm-8",276,854,12,14),e.cutOut("number-sm-9",276,872,12,14),e.cutOut("number-md-0",274,612,14,20),e.cutOut("number-md-1",278,954,10,20),e.cutOut("number-md-2",274,978,14,20),e.cutOut("number-md-3",262,1002,14,20),e.cutOut("number-md-4",1004,0,14,20),e.cutOut("number-md-5",1004,24,14,20),e.cutOut("number-md-6",1010,52,14,20),e.cutOut("number-md-7",1010,84,14,20),e.cutOut("number-md-8",586,484,14,20),e.cutOut("number-md-9",622,412,14,20),e.cutOut("number-lg-0",992,120,24,36),e.cutOut("number-lg-1",272,910,16,36),e.cutOut("number-lg-2",584,320,24,36),e.cutOut("number-lg-3",612,320,24,36),e.cutOut("number-lg-4",640,320,24,36),e.cutOut("number-lg-5",668,320,24,36),e.cutOut("number-lg-6",584,368,24,36),e.cutOut("number-lg-7",612,368,24,36),e.cutOut("number-lg-8",640,368,24,36),e.cutOut("number-lg-9",668,368,24,36),e.cutOut("toast-new",224,1002,32,14),e.cutOut("btn-pause",242,612,26,28),e.cutOut("btn-share",584,284,80,28),e.cutOut("btn-play-icon",668,284,26,28),e.cutOut("btn-play",706,236,110,64),e.cutOut("btn-ranking",826,236,110,64),e.cutOut("btn-menu",924,52,80,28),e.cutOut("btn-ok",924,84,80,28),e.cutOut("btn-rate",926,2,70,44),e.cutOut("bird-yellow-up",6,982,34,24),e.cutOut("bird-yellow-mid",62,982,34,24),e.cutOut("bird-yellow-down",118,982,34,24),e.cutOut("bird-blue-up",174,982,34,24),e.cutOut("bird-blue-mid",230,658,34,24),e.cutOut("bird-blue-down",230,710,34,24),e.cutOut("bird-red-up",230,762,34,24),e.cutOut("bird-red-mid",230,814,34,24),e.cutOut("bird-red-down",230,866,34,24),e.cutOut("spark-sm",276,682,10,10),e.cutOut("spark-md",276,734,10,10),e.cutOut("spark-lg",276,786,10,10),e.cutOut("banner-game-ready",586,118,192,58),e.cutOut("banner-game-over",786,118,200,52),e.cutOut("banner-flappybird",702,182,178,52),e.cutOut("banner-instruction",584,182,114,98),e.cutOut("copyright",886,184,122,10),e.cutOut("icon-plus",992,168,10,10);const h=()=>{i&&t(),i=!0};e.then(h),new f({hit:A,wing:D,swoosh:B,die:k,point:C},h)}))})((()=>{St=!0,ft.init(),It(),pt()(zt),window.setTimeout(Ot,1e3)}))})),window.addEventListener("resize",(()=>{St&&It()}))})()})();