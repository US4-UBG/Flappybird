(()=>{var t={75:function(t){(function(){var e,i,n,o,r,s;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(t.exports=function(){return(e()-r)/1e6},i=process.hrtime,o=(e=function(){var t;return 1e9*(t=i())[0]+t[1]})(),s=1e9*process.uptime(),r=o-s):Date.now?(t.exports=function(){return Date.now()-n},n=Date.now()):(t.exports=function(){return(new Date).getTime()-n},n=(new Date).getTime())}).call(this)},87:(t,e,i)=>{for(var n=i(75),o="undefined"==typeof window?i.g:window,r=["moz","webkit"],s="AnimationFrame",a=o["request"+s],c=o["cancel"+s]||o["cancelRequest"+s],h=0;!a&&h<r.length;h++)a=o[r[h]+"Request"+s],c=o[r[h]+"Cancel"+s]||o[r[h]+"CancelRequest"+s];if(!a||!c){var u=0,p=0,l=[];a=function(t){if(0===l.length){var e=n(),i=Math.max(0,16.666666666666668-(e-u));u=i+e,setTimeout((function(){var t=l.slice(0);l.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(u)}catch(t){setTimeout((function(){throw t}),0)}}),Math.round(i))}return l.push({handle:++p,callback:t,cancelled:!1}),p},c=function(t){for(var e=0;e<l.length;e++)l[e].handle===t&&(l[e].cancelled=!0)}}t.exports=function(t){return a.call(o,t)},t.exports.cancel=function(){c.apply(o,arguments)},t.exports.polyfill=function(t){t||(t=o),t.requestAnimationFrame=a,t.cancelAnimationFrame=c}}},e={};function i(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={exports:{}};return t[n].call(r.exports,r,r.exports,i),r.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),(()=>{"use strict";var t={};i.r(t),i.d(t,{cubicBezier:()=>Z,easeOut:()=>Q,easeOutCirc:()=>et,easeOutExpo:()=>it,linear:()=>$,quadratic:()=>J,sineWaveHS:()=>tt,swing:()=>Y});const e=i.p+"1f82ae5350be3039bfb3fe84ce4c4f89.png";var n,o=function(t,e){var i={width:0,height:0};return"width"in e?(i.width=e.width,i.height=t.height/t.width*e.width):"height"in e&&(i.height=e.height,i.width=t.width*e.height/t.height),i},r=(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(function(){function t(t){this.__source=t,this.ready=0}return t.prototype.eventTracking=function(t,e){this.ready--,this.ready<1&&t({source:this.source,object:e})},Object.defineProperty(t.prototype,"source",{get:function(){return this.__source},enumerable:!1,configurable:!0}),t}()),a=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.test=function(){return e.regexp.test(this.source)},e.prototype.load=function(){var t=this;return this.ready=2,new Promise((function(e,i){var n=new Audio;n.addEventListener("load",(function(){t.eventTracking(e,n)})),n.addEventListener("canplay",(function(){t.eventTracking(e,n)})),n.addEventListener("canplaythrough",(function(){t.eventTracking(e,n)})),n.addEventListener("error",i),n.src=t.source}))},e.regexp=/\.(mp3|wav|ogg|aac)/i,e}(s);const h=c;var u=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.test=function(){return e.regexp.test(this.source)},e.prototype.load=function(){var t=this;return this.ready=1,new Promise((function(e,i){var n=new Image;n.addEventListener("load",(function(){t.eventTracking(e,n)})),n.addEventListener("error",i),n.src=t.source}))},e.regexp=/\.(jpe?g|png|svg|bmp|webp|webm|gif)/i,e}(s);var l=function(){function t(e){var i=this;this.callback=function(){};var n=e.map((function(e){for(var i=0,n=t.loaders;i<n.length;i++){var o=new(0,n[i])(e);if(o.test())return o.load()}throw new Error("No available driver for file: "+e)}));Promise.all(n).then((function(e){e.forEach((function(e){t.assets.set(e.source,e.object)})),i.callback()})).catch((function(t){console.error(t)}))}return t.prototype.then=function(t){this.callback=t},t.get=function(e){return t.assets.get(e)},t.assets=new Map,t.loaders=[h,p],t}();const f=l;var d=l.get;const g=function(){function t(t){this.fps=0,this.timeArray=[],this.context=t,this.containerOpacity=.4,this.textProps={position:{x:0,y:0},preText:"",postText:""},this.containerProps={startingPoint:{x:0,y:0},endPoint:{x:0,y:0}}}return t.prototype.text=function(t,e,i){this.textProps.position=t,this.textProps.preText=e,this.textProps.postText=i},t.prototype.container=function(t,e){this.containerProps={startingPoint:t,endPoint:e}},t.prototype.mark=function(){for(var t=performance.now();this.timeArray.length>0&&this.timeArray[0]<=t-1e3;)this.timeArray.shift();this.timeArray.push(t),this.fps=this.timeArray.length,this.drawContainer(),this.drawText(String(this.fps))},t.prototype.drawContainer=function(){var t=this.context,e=this.containerProps,i=e.startingPoint,n=e.endPoint;t.beginPath(),t.globalAlpha=this.containerOpacity,t.fillStyle="#1e1e20",t.fillRect(i.x,i.y,n.x,n.y),t.fill(),t.closePath()},t.prototype.drawText=function(t){var e=this.context,i=this.textProps,n=i.preText,o=i.postText,r=i.position,s="".concat(n).concat(t).concat(o);e.beginPath(),e.globalAlpha=1,e.font="30px monospace",e.fillStyle="#58d130",e.textAlign="left",e.fillText(s,r.x,r.y),e.closePath()},t}();var y=function(t,e,i){return t+(e-t)*i},m=function(t,e,i){return Math.max(Math.min(i,e),t)},v=function(t,e){return Math.floor(Math.random()*(e-t))+t},w=function(t,e){var i=(new Date).getTime();return Math.sin(i/1e3*2*Math.PI/(1/t))*e},b=function(t,e,i){return e-(i-t)},_=.0062,x={width:288,height:512},S={width:34,height:24},O={width:100,height:300},E={width:24,height:36},k=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},z=function(t,e){var i,n,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(c){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(i=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};const A=function(){function t(e,i){t.audioContext=new(AudioContext||webkitAudioContext),t.audioContext.addEventListener("statechange",(function(){t.isReady="running"===t.audioContext.state})),t.load(e,i)}return t.play=function(e,i){if(void 0===i&&(i=function(){}),void 0===typeof t.Cached[e])throw new TypeError("Key ".concat(e," does not load or not exists."));if(void 0!==t.gainContext){if(t.isReady)try{var n=t.audioContext.createBufferSource();n.buffer=t.Cached[e],n.addEventListener("ended",(function(){return i()})),n.connect(t.gainContext),n.start()}catch(t){throw new Error("Failed to play audio: ".concat(e,". Error: ").concat(t))}}else console.warn("WebSfx.play cannot execute. AudioContext is not started or resumed")},t.volume=function(e){if(void 0!==t.gainContext)try{t.gainContext.gain.value=e}catch(t){}else console.warn("WebSfx.volume cannot set volume. AudioContext is not started or resumed")},t.init=function(){return k(this,void 0,void 0,(function(){var e;return z(this,(function(i){switch(i.label){case 0:return t.isReady&&void 0!==t.gainContext?[2]:[4,t.audioContext.resume()];case 1:return i.sent(),(e=t.audioContext.createGain()).connect(t.audioContext.destination),t.gainContext=e,[2]}}))}))},t.load=function(e,i,n){void 0===n&&(n=0);for(var o=[],r=Object.entries(e),s=n*t.concurrentDownload;s<Math.min(r.length,t.concurrentDownload);s++){if(!/\.(wav|ogg|mp3)$/i.test(r[s][1]))throw new TypeError("WebSfx.contructor accepts 'wav|ogg|mp3' type of files");o.push(t.load_requests(r[s][0],r[s][1]))}Promise.allSettled(o).then((function(o){o.forEach((function(e){"fulfilled"===e.status&&(t.Cached[e.value.name]=e.value.content,t.Cached[e.value.path]=t.Cached[e.value.name])})),r.length>(n+1)*t.concurrentDownload?t.load(e,i,n+1):i(t.Cached)}))},t.load_requests=function(e,i){var n=this;return new Promise((function(o,r){return k(n,void 0,void 0,(function(){var n,s,a;return z(this,(function(c){switch(c.label){case 0:return c.trys.push([0,4,,5]),[4,fetch(i,{method:"GET",mode:"no-cors"})];case 1:if(!(n=c.sent()).ok)throw new TypeError("Erro while fetching '".concat(i));return[4,n.arrayBuffer()];case 2:return s=c.sent(),[4,t.audioContext.decodeAudioData(s)];case 3:return a=c.sent(),o({content:a,path:i,name:e}),[3,5];case 4:return c.sent(),r(),[3,5];case 5:return[2]}}))}))}))},t.Cached={},t.concurrentDownload=5,t.isReady=!1,t}(),I=function(){function t(){this.canvasSize={width:0,height:0},this.velocity={x:0,y:0},this.coordinate={x:0,y:0}}return t.prototype.resize=function(t){var e=t.width,i=t.height;this.canvasSize={width:e,height:i}},t}();var C=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},P=function(t,e){var i,n,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(c){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(i=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},B=function(){function t(t){this.sprite=t,this.Canvas=document.createElement("canvas"),this.ctx=this.Canvas.getContext("2d"),this.loading=[],this.cb_modify=function(t,e){return Promise.resolve(e)},this.then_called=!1,this.cutout_call_count=0}return t.prototype.then=function(e){return C(this,void 0,void 0,(function(){var i=this;return P(this,(function(n){switch(n.label){case 0:return this.then_called?[2]:(this.then_called=!0,[4,Promise.allSettled(this.loading).then((function(n){for(var o=0,r=0,s=n;r<s.length;r++){var a=s[r];"fulfilled"===a.status&&"value"in a?t.cached.set(a.value.name,a.value.img):++o}console.info("Does match with cutout: ".concat(i.cutout_call_count===n.length)),console.warn("Error count: ".concat(o)),e()}))]);case 1:return n.sent(),[2]}}))}))},t.asset=function(e){if(t.cached.has(e))return t.cached.get(e);throw new TypeError("Key: ".concat(e," does not defined on SpriteDestructor"))},t.prototype.modify=function(t){this.cb_modify=t},t.prototype.cutOut=function(t,e,i,n,o){this.Canvas.width=n,this.Canvas.height=o,this.ctx.clearRect(0,0,n,o),this.ctx.imageSmoothingEnabled=!1,this.ctx.drawImage(this.sprite,e,i,n,o,0,0,n,o),this.feedImage(t)},t.prototype.feedImage=function(t){var e=this;this.loading.push(new Promise((function(i,n){var o=new Image;o.src=e.Canvas.toDataURL(),o.addEventListener("load",(function(){return C(e,void 0,void 0,(function(){var e,n;return P(this,(function(r){switch(r.label){case 0:return e=i,n={name:t},[4,this.cb_modify(t,o)];case 1:return e.apply(void 0,[(n.img=r.sent(),n)]),[2]}}))}))})),o.addEventListener("error",(function(t){return n(t)}))}))),this.cutout_call_count++},t.cached=new Map,t}();const j=B;var T=B.asset;const D=function(){function t(){}return Object.defineProperty(t,"background",{get:function(){if(t.bgThemeList.length<1)throw new Error("No theme available");var e=t.bgThemeList[v(0,t.bgThemeList.length)];return t.isNight="night"===e,e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"bird",{get:function(){if(t.birdColorList.length<1)throw new Error("No available bird color");return t.birdColorList[v(0,t.birdColorList.length)]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"pipe",{get:function(){if(t.pipeColorList.length<1)throw new Error("No available pipe color");return t.isNight?t.pipeColorList[v(0,t.pipeColorList.length)]:"green"},enumerable:!1,configurable:!0}),t.birdColorList=[],t.bgThemeList=[],t.pipeColorList=[],t.isNight=!1,t}();var L=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const R=function(t){function e(){var e=t.call(this)||this;return e.images=new Map,e.theme="day",e.velocity.x=2e-4,e.backgroundSize={width:0,height:0},e}return L(e,t),e.prototype.init=function(){this.images.set("day",T("theme-day")),this.images.set("night",T("theme-night")),Object.assign(D.bgThemeList,["day","night"]),this.use(D.background)},e.prototype.reset=function(){this.coordinate={x:0,y:0},this.resize(this.canvasSize),this.use(D.background)},e.prototype.use=function(t){this.theme=t},e.prototype.resize=function(e){var i=e.width,n=e.height;t.prototype.resize.call(this,{width:i,height:n}),this.backgroundSize=o({width:this.images.get(this.theme).width,height:this.images.get(this.theme).height},{height:n})},e.prototype.Update=function(){this.coordinate.x+=this.canvasSize.width*this.velocity.x,this.coordinate.y+=this.velocity.y},e.prototype.Display=function(t){for(var e=this.backgroundSize,i=e.width,n=e.height,o=this.coordinate,r=o.x,s=o.y,a=Math.ceil(this.canvasSize.width/i)+1,c=r%i,h=0;h<a;h++)t.drawImage(this.images.get(this.theme),h*i-c,s,i,n)},e}(I);var U=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const M=function(t){function e(){var e=t.call(this)||this;return e.images=new Map,e.color="green",e.hollSize=0,e.pipePosition={top:{x:0,y:0},bottom:{x:0,y:0}},e.isPassed=!1,e.velocity.x=_,e.scaled={top:{width:0,height:0},bottom:{width:0,height:0}},e}return U(e,t),e.prototype.init=function(){this.images.set("green.top",T("pipe-green-top")),this.images.set("green.bottom",T("pipe-green-bottom")),this.images.set("red.top",T("pipe-red-top")),this.images.set("red.bottom",T("pipe-red-bottom")),Object.assign(D.pipeColorList,["red","green"])},e.prototype.setHollPosition=function(t){this.hollSize=.184*this.canvasSize.height,this.coordinate=t},e.prototype.resize=function(i){var n=i.width,r=i.height,s=this.coordinate.x/this.canvasSize.width*100,a=this.coordinate.y/this.canvasSize.height*100;t.prototype.resize.call(this,{width:n,height:r});var c=.18*this.canvasSize.width;e.pipeSize=o(O,{width:c}),this.hollSize=.184*this.canvasSize.height,this.coordinate.x=n*(s/100),this.coordinate.y=r*(a/100),this.velocity.x=n*_,this.scaled.top=o({width:this.images.get("".concat(this.color,".top")).width,height:this.images.get("".concat(this.color,".top")).height},{width:c}),this.scaled.bottom=o({width:this.images.get("".concat(this.color,".bottom")).width,height:this.images.get("".concat(this.color,".bottom")).height},{width:c})},e.prototype.isOut=function(){return this.coordinate.x+e.pipeSize.width<0},e.prototype.use=function(t){this.color=t},e.prototype.Update=function(){this.coordinate.x-=this.velocity.x},e.prototype.Display=function(t){var i=e.pipeSize.width/2,n=this.coordinate.x,o=this.coordinate.y,r=this.hollSize/2;t.drawImage(this.images.get("".concat(this.color,".top")),n-i,-(this.scaled.top.height-Math.abs(o-r)),this.scaled.top.width,this.scaled.top.height),t.drawImage(this.images.get("".concat(this.color,".bottom")),n-i,o+r,this.scaled.bottom.width,this.scaled.bottom.height)},e.pipeSize={width:0,height:0},e}(I),G=i.p+"fb85655698a54f8cde03153d61436a8e.ogg",F=i.p+"53be63225a77062f0e0567615aaef471.ogg",H=i.p+"25b7658563967e60ca23fb51af9c084f.ogg",N=i.p+"09f7e99dce7a2d12b43909f45bcff6f2.ogg",W=i.p+"06f58df2486e5ade890cf491a58b4e35.ogg";const V=function(){function t(){}return t.init=function(){return t=this,e=void 0,n=function(){return function(t,e){var i,n,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(c){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(i=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(t){switch(t.label){case 0:return[4,A.init()];case 1:return t.sent(),[2]}}))},new((i=void 0)||(i=Promise))((function(o,r){function s(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}));var t,e,i,n},t.volume=function(e){t.currentVolume=e},t.die=function(){A.volume(t.currentVolume),A.play(G)},t.point=function(){A.volume(t.currentVolume),A.play(H)},t.hit=function(e){A.volume(t.currentVolume),A.play(F,e)},t.swoosh=function(){A.volume(t.currentVolume),A.play(N)},t.wing=function(){A.volume(t.currentVolume),A.play(W)},t.currentVolume=1,t}();var q=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const K=function(t){function e(){var e=t.call(this)||this;return e.color="yellow",e.images=new Map,e.force=0,e.scaled={width:0,height:0},e.max_fall_velocity=0,e.max_lift_velocity=0,e.score=0,e.rotation=0,e.causeOfDeath=0,e.flags=1,e.lastCoord=0,e.wingState=1,e}return q(e,t),e.prototype.init=function(){this.images.set("yellow.0",T("bird-yellow-up")),this.images.set("yellow.1",T("bird-yellow-mid")),this.images.set("yellow.2",T("bird-yellow-down")),this.images.set("blue.0",T("bird-blue-up")),this.images.set("blue.1",T("bird-blue-mid")),this.images.set("blue.2",T("bird-blue-down")),this.images.set("red.0",T("bird-red-up")),this.images.set("red.1",T("bird-red-mid")),this.images.set("red.2",T("bird-red-down")),Object.assign(D.birdColorList,["yellow","red","blue"]),this.use(D.bird)},e.prototype.variableReset=function(){this.score=0,this.rotation=0,this.causeOfDeath=0,this.flags=1,this.lastCoord=0,this.wingState=1},e.prototype.reset=function(){this.variableReset(),this.resize(this.canvasSize),this.use(D.bird)},Object.defineProperty(e.prototype,"alive",{get:function(){return 0!=(this.flags&e.FLAG_IS_ALIVE)},enumerable:!1,configurable:!0}),e.prototype.resize=function(i){var n=i.width,r=i.height;t.prototype.resize.call(this,{width:n,height:r}),this.coordinate.y=.5*e.platformHeight,this.coordinate.x=.3*n,this.force=-.009*r,this.scaled=o(S,{height:.024*r}),this.max_fall_velocity=.0141*this.canvasSize.height,this.max_lift_velocity=-.3*this.canvasSize.height},e.prototype.doWave=function(t,e,i){var n=t.x,o=t.y;this.flapWing(3),o+=w(e,i),this.coordinate={x:n,y:o}},e.prototype.flapWing=function(t){this.wingState=1+w(t,2)|0,this.rotation>70&&(this.wingState=1)},e.prototype.flap=function(){this.coordinate.y<0||0==(this.flags&e.FLAG_IS_ALIVE)||(V.wing(),this.velocity.y=this.force,this.lastCoord=this.coordinate.y)},e.prototype.doesHitTheFloor=function(){return this.coordinate.y+this.rotatedDimension().height>Math.abs(this.canvasSize.height-e.platformHeight)},e.prototype.isDead=function(t){if(this.doesHitTheFloor())return this.flags&=~e.FLAG_IS_ALIVE,this.causeOfDeath=1,0==(this.flags&e.FLAG_IS_ALIVE);for(var i=this.rotatedDimension(),n=i.width-i.height/2,o=0,r=t;o<r.length;o++){var s=r[o];try{var a=s.coordinate.x,c=s.coordinate.y,h=s.hollSize/2,u=M.pipeSize.width/2;if(a+u<this.coordinate.x-n)continue;if(Math.abs(a-u)<=this.coordinate.x+n&&(a<this.coordinate.x&&!s.isPassed&&(this.score++,V.point(),s.isPassed=!0),Math.abs(c-h)>=this.coordinate.y-i.height||c+h<=this.coordinate.y+i.height)){this.flags&=~e.FLAG_IS_ALIVE,this.causeOfDeath=2;break}break}catch(t){}}return 0==(this.flags&e.FLAG_IS_ALIVE)},e.prototype.rotatedDimension=function(){var t=this.rotation*Math.PI/180,e=this.scaled.width/2,i=this.scaled.height/2,n=Math.sin(t),o=Math.cos(t);return{width:2*Math.sqrt(Math.pow(e*o,2)+Math.pow(i*n,2)),height:2*Math.sqrt(Math.pow(e*n,2)+Math.pow(i*o,2))}},e.prototype.playDead=function(){0==(this.flags&e.FLAG_DIED)&&(this.flags|=e.FLAG_DIED,2===this.causeOfDeath&&V.die())},e.prototype.use=function(t){this.color=t},e.prototype.handleRotation=function(){if(this.rotation+=this.coordinate.y<this.lastCoord?-7.2:6.5,this.rotation=m(-19,90,this.rotation),0!=(this.flags&e.FLAG_IS_ALIVE)){var t=Math.abs(-19),i=4+(this.rotation+t)/(t+90)*3.2;this.flapWing(b(4,8.2,i))}else this.wingState=1},e.prototype.Update=function(){if(this.doesHitTheFloor()||0!=(this.flags&e.FLAG_DOES_LANDED))return this.flags|=e.FLAG_DOES_LANDED,this.coordinate.y=this.canvasSize.height-e.platformHeight-this.rotatedDimension().height,void this.handleRotation();this.coordinate.y+=m(this.max_lift_velocity,this.max_fall_velocity,this.velocity.y),this.velocity.y+=47e-5*this.canvasSize.height,this.handleRotation()},e.prototype.Display=function(t){var e="".concat(this.color,".").concat(this.wingState);t.save(),t.translate(this.coordinate.x,this.coordinate.y),t.rotate(this.rotation*Math.PI/180),t.drawImage(this.images.get(e),-this.scaled.width,-this.scaled.height,2*this.scaled.width,2*this.scaled.height),t.restore()},e.FLAG_IS_ALIVE=1,e.FLAG_DIED=2,e.FLAG_DOES_LANDED=4,e.platformHeight=0,e}(I),X=function(){function t(){this.isComplete=!1,this.isRunning=!1,this.startTime=0}return Object.defineProperty(t.prototype,"time",{get:function(){return performance.now()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeDiff",{get:function(){return this.isRunning?this.time-this.startTime:0},enumerable:!1,configurable:!0}),t.prototype.stop=function(){this.isComplete=!0,this.isRunning=!1},t.prototype.start=function(){this.isRunning||(this.isRunning=!0,this.isComplete=!1,this.startTime=this.time)},t.prototype.reset=function(){this.isComplete=!1,this.isRunning=!1},t}();var Y=function(t){return.5-Math.cos(t*Math.PI)/2},$=function(t){return t},J=function(t){return Math.pow(t,2)},Z=function(t){return t<=.5?2*Math.pow(t,3):1-2*Math.pow(t,3)},Q=function(t){return.5-Math.cos(t*Math.PI)/2},tt=function(t){return Math.sin(2*t*Math.PI/2)},et=function(t){return Math.sqrt(1-Math.pow(t-1,2))},it=function(t){return 1===t?1:1-Math.pow(2,-10*t)},nt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const ot=function(e){function i(t){var i=e.call(this)||this;return i.options={duration:500,transition:"swing"},Object.assign(i.options,null!=t?t:{}),i}return nt(i,e),Object.defineProperty(i.prototype,"status",{get:function(){return{running:this.isRunning,complete:this.isComplete}},enumerable:!1,configurable:!0}),i.prototype.inUseTransition=function(e){return t[this.options.transition](e)},i}(X);var rt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),st=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rt(e,t),Object.defineProperty(e.prototype,"value",{get:function(){if(this.isComplete||!this.isRunning)return 0;var t=this.timeDiff/this.options.duration;return t>=1?(this.stop(),0):this.inUseTransition(b(0,1,t))},enumerable:!1,configurable:!0}),e}(ot),at=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ct=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}at(e,t),Object.defineProperty(e.prototype,"value",{get:function(){if(this.isComplete&&!this.isRunning)return 1;var t=this.startTime,e=(this.time-t)/this.options.duration;return e>=2&&this.stop(),this.inUseTransition(1-e)},enumerable:!1,configurable:!0})}(ot),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}());const ht=function(e){function i(t){var i=e.call(this)||this;return i.options={duration:500,from:{x:0,y:0},to:{x:0,y:0},transition:"cubicBezier"},Object.assign(i.options,t),i}return ct(i,e),Object.defineProperty(i.prototype,"status",{get:function(){return{running:this.isRunning,complete:this.isComplete}},enumerable:!1,configurable:!0}),i.prototype.inUseTransition=function(e){return t[this.options.transition](e)},i}(X);var ut=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ut(e,t),Object.defineProperty(e.prototype,"value",{get:function(){if(!this.isRunning)return this.isComplete?this.options.to:this.options.from;var t=this.options.from,e=this.options.to,i=this.timeDiff/this.options.duration;return i>=1?(this.stop(),this.options.to):{x:y(t.x,e.x,this.inUseTransition(i)),y:y(t.y,e.y,this.inUseTransition(i))}},enumerable:!1,configurable:!0}),e}(ht),lt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ft=function(t){function e(e){var i=t.call(this)||this;return i.options={durations:{fading:400,bounce:1e3}},Object.assign(i.options,e),i}return lt(e,t),Object.defineProperty(e.prototype,"status",{get:function(){return{running:this.isRunning,complete:this.isComplete}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){if(!this.isRunning)return{opacity:this.isComplete?1:0,value:0};var t=this.options.durations,e=t.fading,i=t.bounce,n=this.timeDiff,o=Y(n/e),r=-tt(n/i);return n>=Math.max(e,i)?(this.stop(),{opacity:1,value:0}):(n>=e&&(o=1),n>=i&&(r=0),{opacity:o,value:r})},enumerable:!1,configurable:!0}),e}(X),dt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gt=function(t){function e(e){var i=t.call(this)||this;return i.options={diff:100},Object.assign(i.options,e),i}return dt(e,t),Object.defineProperty(e.prototype,"status",{get:function(){return{running:this.isRunning,complete:this.isComplete}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.timeDiff>=this.options.diff&&(this.startTime=this.time,!0)},enumerable:!1,configurable:!0}),e}(X),yt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),mt={x:.5,y:.515},vt={x:.5,y:.328};const wt=function(t){function e(){var e=t.call(this)||this;return e.instructImage={size:.4,position:{x:0,y:0},image:void 0,scaled:{width:0,height:0}},e.getReadyImage={size:.65,position:{x:0,y:0},image:void 0,scaled:{width:0,height:0}},e.fadeOut=new st({transition:"linear"}),e.opacity=1,e.isComplete=!1,e.doesTap=!1,e}return yt(e,t),e.prototype.init=function(){this.instructImage.image=T("banner-instruction"),this.getReadyImage.image=T("banner-game-ready")},e.prototype.reset=function(){this.opacity=1,this.isComplete=!1,this.doesTap=!1},e.prototype.tap=function(){this.isComplete||(this.fadeOut.start(),this.isComplete=!0,this.doesTap=!0)},e.prototype.resize=function(e){var i=e.width,n=e.height;t.prototype.resize.call(this,{width:i,height:n}),this.instructImage.scaled=o({width:this.instructImage.image.width,height:this.instructImage.image.height},{width:i*this.instructImage.size}),this.getReadyImage.scaled=o({width:this.getReadyImage.image.width,height:this.getReadyImage.image.height},{width:i*this.getReadyImage.size});var r=mt,s=vt;this.instructImage.position.x=i*r.x-this.instructImage.scaled.width/2,this.instructImage.position.y=n*r.y-this.instructImage.scaled.height/2,this.getReadyImage.position.x=i*s.x-this.getReadyImage.scaled.width/2,this.getReadyImage.position.y=n*s.y-this.getReadyImage.scaled.height/2},e.prototype.Update=function(){this.doesTap?this.opacity=this.fadeOut.value:this.opacity=1},e.prototype.Display=function(t){this.opacity<=0||(t.globalAlpha=this.opacity,t.drawImage(this.getReadyImage.image,this.getReadyImage.position.x,this.getReadyImage.position.y,this.getReadyImage.scaled.width,this.getReadyImage.scaled.height),t.drawImage(this.instructImage.image,this.instructImage.position.x,this.instructImage.position.y,this.instructImage.scaled.width,this.instructImage.scaled.height),t.globalAlpha=1)},e}(I);var bt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const _t=function(t){function e(){var e=t.call(this)||this;return e.currentValue=0,e.numberAsset={},e.numberDimension={width:0,height:0},e}return bt(e,t),e.prototype.init=function(){this.setInitAsset(0,"number-lg-0"),this.setInitAsset(1,"number-lg-1"),this.setInitAsset(2,"number-lg-2"),this.setInitAsset(3,"number-lg-3"),this.setInitAsset(4,"number-lg-4"),this.setInitAsset(5,"number-lg-5"),this.setInitAsset(6,"number-lg-6"),this.setInitAsset(7,"number-lg-7"),this.setInitAsset(8,"number-lg-8"),this.setInitAsset(9,"number-lg-9")},e.prototype.setInitAsset=function(t,e){this.numberAsset[String(t)]=T(e)},e.prototype.setNum=function(t){this.currentValue=t},e.prototype.resize=function(e){var i=e.width,n=e.height;t.prototype.resize.call(this,{width:i,height:n}),this.numberDimension=o(E,{height:.065*n}),this.coordinate.x=.5*this.canvasSize.width,this.coordinate.y=.18*this.canvasSize.height},e.prototype.Update=function(){},e.prototype.Display=function(t){var e=this,i=String(this.currentValue).split(""),n=i.length*this.numberDimension.width,o=this.coordinate.x-n/2,r=this.coordinate.y-this.numberDimension.height/2;i.forEach((function(i){t.drawImage(e.numberAsset[i],o,r,e.numberDimension.width,e.numberDimension.height),o+=e.numberDimension.width}))},e}(I);var xt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),St=function(){return St=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},St.apply(this,arguments)};const Ot=function(t){function e(e){var i=e.style,n=e.strong,o=e.interval,r=e.easing,s=t.call(this)||this;return s.strong=n,s.style=i,s.events=[],s.fadeEvent=new st({duration:o,transition:r}),s.value=0,s}return xt(e,t),e.prototype.init=function(){},e.prototype.reset=function(){this.fadeEvent.reset();for(var t=0,e=this.events;t<e.length;t++)e[t].isCalled=!1},e.prototype.start=function(){this.fadeEvent.start()},e.prototype.setEvent=function(t,e){this.events.push({range:{min:t[0],max:t[1]},callback:e,isCalled:!1})},Object.defineProperty(e.prototype,"status",{get:function(){return St(St({},this.fadeEvent.status),{value:this.value})},enumerable:!1,configurable:!0}),e.prototype.Update=function(){if(!this.status.complete||this.status.running){this.value=this.fadeEvent.value;for(var t=0,e=this.events;t<e.length;t++){var i=e[t];i.isCalled||i.range.min<=this.value&&i.range.max>=this.value&&(i.callback(),i.isCalled=!0)}}else this.value=0},e.prototype.Display=function(t){t.globalAlpha=this.strong*this.value,t.fillStyle=this.style,t.fillRect(0,0,this.canvasSize.width,this.canvasSize.height),t.fill(),t.globalAlpha=1},e}(I);var Et=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const kt=function(t){function e(){var e=t.call(this)||this;return e.images=new Map,e.timingEvent=new gt({diff:200}),e.scaled={width:0,height:0},e.dimension={width:0,height:0},e.target={x:0,y:0},e.status="stopped",e.sparkList=[],e.currentSparkIndex=0,e}return Et(e,t),e.prototype.init=function(){this.images.set("spark-sm",T("spark-sm")),this.images.set("spark-md",T("spark-md")),this.images.set("spark-lg",T("spark-lg")),this.sparkList=["spark-sm","spark-md","spark-lg","spark-md","spark-sm"]},e.prototype.resize=function(e){var i=e.width,n=e.height;t.prototype.resize.call(this,{width:i,height:n}),this.scaled=o({width:this.images.get("spark-lg").width,height:this.images.get("spark-lg").height},{width:.03*i})},e.prototype.doSpark=function(){"running"!==this.status&&(this.status="running",this.timingEvent.start())},e.prototype.stop=function(){this.status="stopped",this.timingEvent.reset()},e.prototype.relocate=function(){this.target.x=v(this.coordinate.x,this.coordinate.x+this.dimension.width),this.target.y=v(this.coordinate.y,this.coordinate.y+this.dimension.height)},e.prototype.move=function(t,e){var i=t.x,n=t.y;this.coordinate={x:i,y:n},this.dimension=e},e.prototype.Update=function(){"stopped"!==this.status&&this.timingEvent.value&&(this.currentSparkIndex>this.sparkList.length-2?(this.currentSparkIndex=0,this.relocate()):this.currentSparkIndex++)},e.prototype.Display=function(t){"stopped"!==this.status&&t.drawImage(this.images.get(this.sparkList[this.currentSparkIndex]),Math.abs(this.target.x-this.scaled.width/2),Math.abs(this.target.y-this.scaled.height/2),this.scaled.width,this.scaled.height)},e}(I),zt=function(){function t(){this.coordinate={x:0,y:0},this.calcCoord={x:0,y:0},this.dimension={width:0,height:0},this.canvasSize={width:0,height:0},this.additionalTranslate={x:0,y:0},this.touchStart={x:0,y:0},this.active=!1,this.img=void 0,this.hoverState=!1,this.initialWidth=0}return Object.defineProperty(t.prototype,"isHovered",{get:function(){return this.hoverState},enumerable:!1,configurable:!0}),t.prototype.resize=function(t){var e=t.width,i=t.height;void 0!==this.img&&(this.dimension=o({width:this.img.width,height:this.img.height},{width:e*this.initialWidth})),this.canvasSize={width:e,height:i}},t.prototype.Update=function(){this.calcCoord.x=this.canvasSize.width*this.coordinate.x+this.additionalTranslate.x,this.calcCoord.y=this.canvasSize.height*this.coordinate.y+this.additionalTranslate.y},t.prototype.mouseEvent=function(t,e){var i=e.x,n=e.y;"down"===t?this.onMouseDown({x:i,y:n}):"up"===t&&this.onMouseup({x:i,y:n})},t.prototype.reset=function(){this.move({x:0,y:0})},t.prototype.move=function(t){var e=t.x,i=t.y;this.additionalTranslate.x=this.canvasSize.width*e,this.additionalTranslate.y=this.canvasSize.height*i},t.prototype.isInRange=function(t){var e=t.x,i=t.y,n=this.calcCoord.x,o=this.calcCoord.y,r=this.dimension.width/2,s=this.dimension.height/2;return n-r<e&&n+r>e&&o-s<i&&o+s>i},t.prototype.onMouseDown=function(t){this.active&&(this.touchStart=t,this.isInRange(t)&&(this.hoverState=!0))},t.prototype.onMouseup=function(t){this.active&&(this.hoverState=!1,this.isInRange(t)&&this.isInRange(this.touchStart)&&this.click())},t}();var At=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const It=function(t){function e(){var e=t.call(this)||this;return e.initialWidth=.38,e.coordinate={x:.259,y:.6998},e.active=!0,e.callback=function(){},e}return At(e,t),e.prototype.click=function(){V.swoosh(),this.callback()},e.prototype.onClick=function(t){this.callback=t},e.prototype.init=function(){this.img=T("btn-play")},e.prototype.Update=function(){this.reset(),this.isHovered&&this.move({x:0,y:.004}),t.prototype.Update.call(this)},e.prototype.Display=function(t){var e=this.calcCoord.x,i=this.calcCoord.y,n=this.dimension.width/2,o=this.dimension.height/2;t.drawImage(this.img,e-n,i-o,2*n,2*o)},e}(zt);var Ct=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Pt=function(t){function e(){var e=t.call(this)||this;return e.coordinate.x=.741,e}return Ct(e,t),e.prototype.init=function(){this.img=T("btn-ranking")},e}(It);var Bt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const jt=function(t){function e(){var e=t.call(this)||this;return e.initialWidth=.1,e.assets=new Map,e.is_mute=!1,e.coordinate.x=.93,e.coordinate.y=.04,e.active=!0,e}return Bt(e,t),e.prototype.click=function(){V.swoosh(),this.is_mute=!this.is_mute,V.currentVolume=this.is_mute?0:1},e.prototype.setImg=function(){var t="".concat(this.is_mute?"mute":"unmute");this.img=this.assets.get(t)},e.prototype.init=function(){this.assets.set("mute",T("btn-mute")),this.assets.set("unmute",T("btn-speaker")),this.setImg()},e.prototype.Update=function(){this.reset(),this.isHovered&&this.move({x:0,y:.004}),this.setImg(),t.prototype.Update.call(this)},e.prototype.Display=function(t){var e=this.calcCoord.x,i=this.calcCoord.y,n=this.dimension.width/2,o=this.dimension.height/2;t.drawImage(this.img,e-n,i-o,2*n,2*o)},e}(zt),Tt=function(){function t(){var e;(null!==(e=t.sk)&&void 0!==e?e:[]).length<1&&(t.sk=["brrrrrrrrrrr"]),t.sk=t.utoa(t.sk[0]),t.isAvailable=!1;try{"localStorage"in window&&"object"==typeof window.localStorage&&(t.isAvailable=!0)}catch(e){t.isAvailable=!1}}return t.utoa=function(t){return btoa(unescape(encodeURIComponent(t)))},t.atou=function(t){return decodeURIComponent(escape(atob(t)))},t.save=function(e,i){if(t.isAvailable){var n=typeof i;"string"!=typeof i&&(i=String(i)),window.localStorage.setItem("__".concat(t.sk,"_").concat(e,"__"),t.utoa(JSON.stringify({mode:n,value:i})))}else console.warn("Storage is not available")},t.get=function(e){var i,n,o,r;if(t.isAvailable)try{var s=JSON.parse(t.atou(window.localStorage.getItem("__".concat(t.sk,"_").concat(e,"__"))));if(null!==(i=s.mode)&&void 0!==i&&i)switch(s.mode){case"string":return null!==(n=s.value)&&void 0!==n?n:"";case"number":return Number(null!==(o=s.value)&&void 0!==o?o:0);case"boolean":return!(null===(r=s.value)||void 0===r||!r||"true"!==s.value)}return}catch(t){return void console.error("Failed to fetch highscore")}else console.warn("Storage is not available")},t.sk=window.location.href.toString().match(/([a-zA-Z\-]+\.github\.io\/[a-zA-Z\-\.]+\/)/i),t}();var Dt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Lt=function(t){function e(){var e=t.call(this)||this;return e.flags=0,e.images=new Map,e.playButton=new It,e.rankingButton=new Pt,e.toggleSpeakerButton=new jt,e.spark=new kt,e.currentHighScore=0,e.currentGeneratedNumber=0,e.currentScore=0,e.FlyInAnim=new pt({duration:500,from:{x:.5,y:1.5},to:{x:.5,y:.438},transition:"easeOutExpo"}),e.TimingEventAnim=new gt({diff:30}),e.BounceInAnim=new ft({durations:{bounce:300,fading:100}}),e}return Dt(e,t),e.prototype.init=function(){this.images.set("banner-gameover",T("banner-game-over")),this.images.set("score-board",T("score-board")),this.images.set("coin-10",T("coin-dull-bronze")),this.images.set("coin-20",T("coin-dull-metal")),this.images.set("coin-30",T("coin-shine-gold")),this.images.set("coin-40",T("coin-shine-silver")),this.images.set("new-icon",T("toast-new"));for(var t=0;t<10;++t)this.images.set("number-".concat(t),T("number-md-".concat(t)));this.rankingButton.init(),this.playButton.init(),this.toggleSpeakerButton.init(),this.playButton.active=!1,this.rankingButton.active=!1,this.toggleSpeakerButton.active=!1,this.spark.init();var e=Tt.get("highscore");this.currentHighScore="number"==typeof e?e:0},e.prototype.resize=function(e){var i=e.width,n=e.height;t.prototype.resize.call(this,{width:i,height:n}),this.rankingButton.resize(this.canvasSize),this.playButton.resize(this.canvasSize),this.spark.resize(this.canvasSize),this.toggleSpeakerButton.resize(this.canvasSize)},e.prototype.Update=function(){this.rankingButton.Update(),this.playButton.Update(),this.spark.Update(),this.toggleSpeakerButton.Update()},e.prototype.Display=function(t){if(0!=(this.flags&e.FLAG_SHOW_BANNER)){var i=o({width:this.images.get("banner-gameover").width,height:this.images.get("banner-gameover").height},{width:.7*this.canvasSize.width}),n=this.BounceInAnim.value,r=.225*this.canvasSize.height-i.height/2;t.globalAlpha=n.opacity,t.drawImage(this.images.get("banner-gameover"),.5*this.canvasSize.width-i.width/2,r+n.value*(.015*this.canvasSize.height),i.width,i.height),t.globalAlpha=1}if(0!=(this.flags&e.FLAG_SHOW_SCOREBOARD)){var s=o({width:this.images.get("score-board").width,height:this.images.get("score-board").height},{width:.85*this.canvasSize.width});(n=Object.assign({},this.FlyInAnim.value)).x=this.canvasSize.width*n.x-s.width/2,n.y=this.canvasSize.height*n.y-s.height/2,t.drawImage(this.images.get("score-board"),n.x,n.y,s.width,s.height),this.TimingEventAnim.value&&this.currentScore>this.currentGeneratedNumber&&this.currentGeneratedNumber++,this.TimingEventAnim.status.complete&&!this.TimingEventAnim.status.running&&(this.currentGeneratedNumber>this.currentHighScore&&(this.setHighScore(this.currentGeneratedNumber),this.flags|=e.FLAG_NEW_HIGH_SCORE),this.addMedal(t,n,s),this.showButtons()),this.displayScore(t,n,s),this.displayBestScore(t,n,s,0!=(this.flags&e.FLAG_NEW_HIGH_SCORE)),this.FlyInAnim.status.complete&&!this.FlyInAnim.status.running&&(this.TimingEventAnim.start(),this.currentGeneratedNumber===this.currentScore&&this.TimingEventAnim.stop())}0!=(this.flags&e.FLAG_SHOW_BUTTONS)&&(this.rankingButton.Display(t),this.playButton.Display(t),this.toggleSpeakerButton.Display(t))},e.prototype.showBanner=function(){this.flags|=e.FLAG_SHOW_BANNER,this.BounceInAnim.start()},e.prototype.showBoard=function(){this.flags|=e.FLAG_SHOW_SCOREBOARD,this.FlyInAnim.start(),this.spark.doSpark()},e.prototype.showButtons=function(){this.flags|=e.FLAG_SHOW_BUTTONS,this.playButton.active=!0,this.rankingButton.active=!0,this.toggleSpeakerButton.active=!0},e.prototype.setHighScore=function(t){Tt.save("highscore",t),this.currentHighScore=t},e.prototype.setScore=function(t){this.currentScore=t},e.prototype.addMedal=function(t,e,i){if(!(this.currentScore<10)){var n;n=this.currentScore>=10&&this.currentScore<20?this.images.get("coin-10"):this.currentScore>=20&&this.currentScore<30?this.images.get("coin-20"):Math.floor(this.currentScore/10)%2==0?this.images.get("coin-40"):this.images.get("coin-30");var r=o({width:n.width,height:n.height},{width:.1878*i.width}),s={x:.36*(e.x+i.width/2),y:.9196*(e.y+i.height/2)};t.drawImage(n,s.x,s.y,r.width,r.height),this.spark.move(s,r),this.spark.Display(t)}},e.prototype.displayScore=function(t,e,i){var n=this,r=o({width:this.images.get("number-1").width,height:this.images.get("number-1").height},{width:.05*i.width});(e=Object.assign({},e)).x=1.565*(e.x+i.width/2),e.y=.864*(e.y+i.height/2),String(this.currentGeneratedNumber).split("").reverse().forEach((function(i,o){t.drawImage(n.images.get("number-".concat(i)),e.x-o*(r.width+5),e.y,r.width,r.height)}))},e.prototype.displayBestScore=function(t,i,n,r){var s=this,a=o({width:this.images.get("number-1").width,height:this.images.get("number-1").height},{width:.05*n.width});if((i=Object.assign({},i)).x=1.565*(i.x+n.width/2),i.y=1.074*(i.y+n.height/2),String(this.currentHighScore).split("").reverse().forEach((function(e,n){t.drawImage(s.images.get("number-".concat(e)),i.x-n*(a.width+5),i.y,a.width,a.height)})),0!=(this.flags&e.FLAG_NEW_HIGH_SCORE)){var c=o({width:this.images.get("new-icon").width,height:this.images.get("new-icon").height},{width:.14*n.width});t.drawImage(this.images.get("new-icon"),.73*i.x,.922*i.y,c.width,c.height)}},e.prototype.hide=function(){this.flags=0,this.playButton.active=!1,this.rankingButton.active=!1,this.toggleSpeakerButton.active=!1,this.currentGeneratedNumber=0,this.FlyInAnim.reset(),this.BounceInAnim.reset(),this.TimingEventAnim.reset(),this.spark.stop()},e.prototype.onRestart=function(t){this.playButton.onClick(t)},e.prototype.onShowRanks=function(t){},e.prototype.mouseDown=function(t){var e=t.x,i=t.y;this.playButton.mouseEvent("down",{x:e,y:i}),this.rankingButton.mouseEvent("down",{x:e,y:i}),this.toggleSpeakerButton.mouseEvent("down",{x:e,y:i})},e.prototype.mouseUp=function(t){var e=t.x,i=t.y;this.playButton.mouseEvent("up",{x:e,y:i}),this.rankingButton.mouseEvent("up",{x:e,y:i}),this.toggleSpeakerButton.mouseEvent("up",{x:e,y:i})},e.prototype.triggerPlayATKeyboardEvent=function(){0!=(this.flags&e.FLAG_SHOW_BUTTONS)&&this.playButton.click()},e.FLAG_SHOW_BANNER=1,e.FLAG_SHOW_SCOREBOARD=2,e.FLAG_SHOW_BUTTONS=4,e.FLAG_NEW_HIGH_SCORE=8,e}(I);var Rt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ut=function(t){function e(e){var i=t.call(this)||this;return i.state="waiting",i.bird=new K,i.count=new _t,i.game=e,i.pipeGenerator=i.game.pipeGenerator,i.bannerInstruction=new wt,i.gameState="none",i.scoreBoard=new Lt,i.transition=new Ot({interval:500,strong:1,style:"black",easing:"sineWaveHS"}),i.flashScreen=new Ot({style:"white",interval:180,strong:.7,easing:"linear"}),i.hideBird=!1,i.showScoreBoard=!1,i.transition.setEvent([.99,1],i.reset.bind(i)),i}return Rt(e,t),e.prototype.init=function(){this.bird.init(),this.count.init(),this.bannerInstruction.init(),this.scoreBoard.init(),this.setButtonEvent(),this.flashScreen.init(),this.transition.init()},e.prototype.reset=function(){this.gameState="none",this.state="waiting",this.game.background.reset(),this.game.platform.reset(),this.pipeGenerator.reset(),this.bannerInstruction.reset(),this.game.bgPause=!1,this.hideBird=!1,this.showScoreBoard=!1,this.scoreBoard.hide(),this.bird.reset()},e.prototype.resize=function(e){var i=e.width,n=e.height;t.prototype.resize.call(this,{width:i,height:n}),this.bird.resize(this.canvasSize),this.count.resize(this.canvasSize),this.bannerInstruction.resize(this.canvasSize),this.scoreBoard.resize(this.canvasSize),this.flashScreen.resize(this.canvasSize),this.transition.resize(this.canvasSize)},e.prototype.Update=function(){var t=this;if(this.flashScreen.Update(),this.transition.Update(),this.scoreBoard.Update(),!this.bird.alive)return this.game.bgPause=!0,void this.bird.Update();"waiting"!==this.state?(this.bannerInstruction.Update(),this.pipeGenerator.Update(),this.bird.Update(),this.bird.isDead(this.pipeGenerator.pipes)&&(this.flashScreen.reset(),this.flashScreen.start(),this.gameState="died",window.setTimeout((function(){t.scoreBoard.setScore(t.bird.score),t.showScoreBoard=!0,window.setTimeout((function(){t.scoreBoard.showBoard(),V.swoosh()}),700),t.scoreBoard.showBanner(),V.swoosh()}),500),V.hit((function(){t.bird.playDead()})))):this.bird.doWave({x:this.bird.coordinate.x,y:.48*this.canvasSize.height},1,6)},e.prototype.Display=function(t){"playing"!==this.state&&"waiting"!==this.state||(this.bannerInstruction.Display(t),"died"===this.gameState&&this.showScoreBoard||(this.count.setNum(this.bird.score),this.count.Display(t)),this.hideBird||this.bird.Display(t),this.scoreBoard.Display(t)),this.flashScreen.Display(t),this.transition.Display(t)},e.prototype.setButtonEvent=function(){var t=this;this.scoreBoard.onRestart((function(){t.transition.status.running||(t.transition.reset(),t.transition.start())}))},e.prototype.click=function(t){t.x,t.y,"died"!==this.gameState&&(this.state="playing",this.gameState="playing",this.bannerInstruction.tap(),this.bird.flap())},e.prototype.mouseDown=function(t){var e=t.x,i=t.y;"died"===this.gameState&&this.scoreBoard.mouseDown({x:e,y:i})},e.prototype.mouseUp=function(t){var e=t.x,i=t.y;"died"===this.gameState&&this.scoreBoard.mouseUp({x:e,y:i})},e.prototype.startAtKeyBoardEvent=function(){"died"===this.gameState&&this.scoreBoard.triggerPlayATKeyboardEvent()},e}(I);const Mt=Ut;var Gt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Ft=function(t){function e(){var e=t.call(this)||this;return e.initialWidth=.24,e.coordinate.x=.5,e.coordinate.y=.53,e}return Gt(e,t),e.prototype.init=function(){this.img=T("btn-rate")},e.prototype.click=function(){Object.assign(document.createElement("a"),{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/jxmked/Flappybird"}).click()},e}(It);var Ht=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Nt=function(t){function e(){var e=t.call(this)||this;return e.bird=new K,e.playButton=new It,e.rankingButton=new Pt,e.rateButton=new Ft,e.toggleSpeakerButton=new jt,e.flappyBirdBanner=void 0,e.copyright=void 0,e}return Ht(e,t),e.prototype.init=function(){this.bird.init(),this.playButton.init(),this.rankingButton.init(),this.rateButton.init(),this.toggleSpeakerButton.init(),this.flappyBirdBanner=T("banner-flappybird"),this.copyright=T("copyright")},e.prototype.resize=function(e){var i=e.width,n=e.height;t.prototype.resize.call(this,{width:i,height:n}),this.bird.resize({width:i,height:n}),this.playButton.resize({width:i,height:n}),this.rankingButton.resize({width:i,height:n}),this.rateButton.resize({width:i,height:n}),this.toggleSpeakerButton.resize({width:i,height:n})},e.prototype.Update=function(){this.bird.doWave({x:.5*this.canvasSize.width,y:.4*this.canvasSize.height},1.4,9),this.playButton.Update(),this.rankingButton.Update(),this.rateButton.Update(),this.toggleSpeakerButton.Update()},e.prototype.Display=function(t){this.toggleSpeakerButton.Display(t),this.playButton.Display(t),this.rankingButton.Display(t),this.rateButton.Display(t),this.bird.Display(t);var e=o({width:this.flappyBirdBanner.width,height:this.flappyBirdBanner.height},{width:.67*this.canvasSize.width});t.drawImage(this.flappyBirdBanner,.5*this.canvasSize.width-e.width/2,.28*this.canvasSize.height-e.height/2,e.width,e.height);var i=o({width:this.copyright.width,height:this.copyright.height},{width:.44*this.canvasSize.width});t.drawImage(this.copyright,.5*this.canvasSize.width-i.width/2,.806*this.canvasSize.height-i.height/2,i.width,i.height),this.insertAppVersion(t)},e.prototype.insertAppVersion=function(t){var e=.04*this.canvasSize.width,i=.985*this.canvasSize.height,n=.985*this.canvasSize.width;t.font="bold ".concat(e,"px monospace"),t.textAlign="center",t.fillStyle="#8E8E93",t.fillText("v".concat("0.5.0"),n-2*e,i)},e.prototype.mouseDown=function(t){var e=t.x,i=t.y;this.toggleSpeakerButton.mouseEvent("down",{x:e,y:i}),this.playButton.mouseEvent("down",{x:e,y:i}),this.rankingButton.mouseEvent("down",{x:e,y:i}),this.rateButton.mouseEvent("down",{x:e,y:i})},e.prototype.mouseUp=function(t){var e=t.x,i=t.y;this.toggleSpeakerButton.mouseEvent("up",{x:e,y:i}),this.playButton.mouseEvent("up",{x:e,y:i}),this.rankingButton.mouseEvent("up",{x:e,y:i}),this.rateButton.mouseEvent("up",{x:e,y:i})},e.prototype.startAtKeyBoardEvent=function(){this.playButton.click()},e}(I),Wt=function(){function t(){this.range={max:0,min:0},this.width=0,this.pipes=[],this.distance=0,this.initialXPos=0,this.canvasSize={width:0,height:0},this.pipeColor="green"}return t.prototype.reset=function(){this.pipes.splice(0,this.pipes.length),this.resize({max:this.range.max,width:this.canvasSize.width,height:this.canvasSize.height}),this.pipeColor=D.pipe},t.prototype.resize=function(t){var e=t.max,i=t.width,n=t.height;this.range={max:e,min:.194*n},this.distance=.392*i,this.width=i,this.canvasSize={width:i,height:n};for(var o=0,r=this.pipes;o<r.length;o++)r[o].resize(this.canvasSize)},t.prototype.needPipe=function(){var t=this.pipes.length;return 0===t?(this.initialXPos=2*(this.width+M.pipeSize.width),!0):this.distance<=this.width-this.pipes[t-1].coordinate.x&&(this.initialXPos=this.width+M.pipeSize.width,!0)},t.prototype.generate=function(){return{position:{x:this.initialXPos,y:v(this.range.min,this.range.max-this.range.min)}}},t.prototype.Update=function(){if(this.needPipe()){var t=new M;t.init(),t.use(this.pipeColor),t.resize(this.canvasSize),t.setHollPosition(this.generate().position),this.pipes.push(t)}for(var e=0;e<this.pipes.length;e++)this.pipes[e].Update(),this.pipes[e].isOut()&&(this.pipes.splice(e,1),e--)},t}();var Vt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const qt=function(t){function e(){var e=t.call(this)||this;return e.velocity.x=_,e.platformSize={width:0,height:0},e.img=void 0,e}return Vt(e,t),e.prototype.init=function(){this.img=T("platform")},e.prototype.reset=function(){this.coordinate={x:0,y:0},this.resize(this.canvasSize)},e.prototype.resize=function(e){var i=e.width,n=e.height;t.prototype.resize.call(this,{width:i,height:n}),this.platformSize=o({width:this.img.width,height:this.img.height},{height:n/4}),this.coordinate.y=n-this.platformSize.height},e.prototype.Update=function(){this.coordinate.x+=this.canvasSize.width*this.velocity.x,this.coordinate.y+=this.velocity.y},e.prototype.Display=function(t){for(var e=this.platformSize,i=e.width,n=e.height,o=this.coordinate,r=o.x,s=o.y,a=Math.ceil(this.canvasSize.width/i)+1,c=r%i,h=0;h<a;h++)t.drawImage(this.img,h*i-c,s,i,n)},e}(I),Kt=function(){function t(){this.objects=new Map,this.currentState=""}return t.prototype.setState=function(t){this.currentState=t},t.prototype.register=function(t,e){this.objects.set(t,e)},t.prototype.Update=function(){var t=this.objects.get(this.currentState);if(void 0===t)throw new TypeError("State ".concat(this.currentState," does not exists"));t.Update()},t.prototype.Display=function(t){var e=this.objects.get(this.currentState);if(void 0===e)throw new TypeError("State ".concat(this.currentState," does not exists"));e.Display(t)},t}();var Xt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Yt=function(t){function e(e){var i=t.call(this)||this;return i.screenChanger=new Kt,i.background=new R,i.canvas=e,i.context=i.canvas.getContext("2d",{desynchronized:!0,alpha:!1}),i.platform=new qt,i.pipeGenerator=new Wt,i.screenIntro=new Nt,i.gamePlay=new Mt(i),i.state="intro",i.bgPause=!1,i.transition=new Ot({interval:700,strong:1,style:"black",easing:"sineWaveHS"}),i.transition.setEvent([.98,1],(function(){i.state="game"})),i}return Xt(e,t),e.prototype.init=function(){new Tt,this.background.init(),this.platform.init(),this.transition.init(),V.init(),V.volume(1),this.screenIntro.init(),this.gamePlay.init(),this.setEvent(),this.screenIntro.playButton.active=!0,this.screenIntro.rankingButton.active=!0,this.screenIntro.rateButton.active=!0,this.screenChanger.register("intro",this.screenIntro),this.screenChanger.register("game",this.gamePlay)},e.prototype.reset=function(){this.background.reset(),this.platform.reset(),this.Resize(this.canvasSize)},e.prototype.Resize=function(e){var i=e.width,n=e.height;t.prototype.resize.call(this,{width:i,height:n}),this.background.resize(this.canvasSize),this.platform.resize(this.canvasSize),this.transition.resize(this.canvasSize),K.platformHeight=this.platform.platformSize.height,this.pipeGenerator.resize({max:n-this.platform.platformSize.height,width:i,height:n}),this.screenIntro.resize(this.canvasSize),this.gamePlay.resize(this.canvasSize),this.canvas.width=i,this.canvas.height=n},e.prototype.Update=function(){this.transition.Update(),this.screenChanger.setState(this.state),this.bgPause||(this.background.Update(),this.platform.Update()),this.screenChanger.Update()},e.prototype.Display=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.imageSmoothingEnabled=!1,this.context.imageSmoothingQuality="high",this.screenChanger.setState(this.state),this.background.Display(this.context);for(var t=0,e=this.pipeGenerator.pipes;t<e.length;t++)e[t].Display(this.context);this.platform.Display(this.context),this.screenChanger.Display(this.context),this.transition.Display(this.context)},e.prototype.setEvent=function(){var t=this;this.screenIntro.playButton.onClick((function(){"intro"===t.state&&(t.screenIntro.playButton.active=!1,t.screenIntro.rankingButton.active=!1,t.screenIntro.rateButton.active=!1,t.screenIntro.toggleSpeakerButton.active=!1,t.transition.reset(),t.transition.start())}))},e.prototype.onClick=function(t){var e=t.x,i=t.y;"game"===this.state&&this.gamePlay.click({x:e,y:i})},e.prototype.mouseDown=function(t){var e=t.x,i=t.y;this.screenIntro.mouseDown({x:e,y:i}),this.gamePlay.mouseDown({x:e,y:i})},e.prototype.mouseUp=function(t){var e=t.x,i=t.y;this.screenIntro.mouseUp({x:e,y:i}),this.gamePlay.mouseUp({x:e,y:i})},e.prototype.startAtKeyBoardEvent=function(){"intro"===this.state?this.screenIntro.startAtKeyBoardEvent():this.gamePlay.startAtKeyBoardEvent()},Object.defineProperty(e.prototype,"currentState",{get:function(){return this.state},enumerable:!1,configurable:!0}),e}(I);const $t=Yt,Jt=i.p+"3fa15f611241a3fbba7573a9b26102c2.png";var Zt=i(87),Qt=i.n(Zt);"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("./service-worker.js").then((function(t){console.log("SW registered")})).catch((function(t){console.log("SW registration failed")}))}));var te=document.createElement("canvas"),ee=document.createElement("img"),ie=document.querySelector("#main-canvas"),ne=ie.getContext("2d"),oe=document.querySelector("#loading-modal"),re=new $t(te),se=new g(re.context),ae=!1;ee.src=e,se.text({x:50,y:50},""," Cycle"),se.container({x:10,y:10},{x:230,y:70});var ce=function(){ne.drawImage(te,0,0),re.Update(),re.Display(),Qt()(ce)},he=function(){var t=o(x,{height:2*window.innerHeight-50});ie.style.maxWidth=String(t.width/2)+"px",ie.style.maxHeight=String(t.height/2)+"px",ie.height=t.height,ie.width=t.width,te.height=t.height,te.width=t.width,console.log("Canvas Size: ".concat(t.width,"x").concat(t.height)),re.Resize(t)},ue=function(){(function(t,e){var i=!1,n=!1,o=!0,r={down:!1,position:{x:0,y:0}},s=function(t){var i=t.x,n=t.y,o=e.getBoundingClientRect(),r=o.left,s=o.top,a=o.width,c=o.height;return{x:(i-r)/a*e.width,y:(n-s)/c*e.height}},a=function(t,e){var i=t.x,n=t.y;e.preventDefault(),r.position=s({x:i,y:n})},c=function(e,a,c){var h=e.x,u=e.y;o||(o=!0,n=!1,A.init(),a.preventDefault(),c||(r.position=s({x:h,y:u})),t.mouseUp(r.position),r.down=!1,i=!1)},h=function(e,a){var c=e.x,h=e.y;n||(o=!1,n=!0,A.init(),a.preventDefault(),r.position=s({x:c,y:h}),t.mouseDown(r.position),r.down=!0,r.down&&(i||(t.onClick(r.position),i=!0)))};e.addEventListener("mousedown",(function(t){var e=t.clientX,i=t.clientY;h({x:e,y:i},t)})),e.addEventListener("mouseup",(function(t){var e=t.clientX,i=t.clientY;c({x:e,y:i},t,!1)})),e.addEventListener("mousemove",(function(t){var e=t.clientX,i=t.clientY;a({x:e,y:i},t)})),e.addEventListener("touchstart",(function(t){var e=t.touches[0].clientX,i=t.touches[0].clientY;h({x:e,y:i},t)})),e.addEventListener("touchend",(function(t){if(t.touches.length<1)c(r.position,t,!0);else{var e=t.touches[0].clientX,i=t.touches[0].clientY;c({x:e,y:i},t,!1)}})),e.addEventListener("touchmove",(function(t){var e=t.touches[0].clientX,i=t.touches[0].clientY;a({x:e,y:i},t)})),document.addEventListener("keydown",(function(i){var n=i.key,o=i.keyCode,r=i.code;" "!==n&&32!==o&&"Space"!==r&&"Enter"!==n&&13!==o&&"NumpadEnter"!==r&&"Enter"!==r||(t.startAtKeyBoardEvent(),h({x:e.width/2,y:e.height/2},i))})),document.addEventListener("keyup",(function(t){var i=t.key,n=t.keyCode,o=t.code;" "!==i&&32!==n&&"Space"!==o&&"Enter"!==i&&13!==n&&"NumpadEnter"!==o&&"Enter"!==o||c({x:e.width/2,y:e.height/2},t,!1)}))})(re,ie),oe.style.display="none",document.body.style.backgroundColor="rgba(28, 28, 30, 1)"};window.addEventListener("DOMContentLoaded",(function(){oe.insertBefore(ee,oe.childNodes[0]),function(t){var e=!1;new f([Jt]).then((function(){var i=new j(d(Jt));i.cutOut("theme-day",0,0,288,512),i.cutOut("theme-night",292,0,288,512),i.cutOut("platform",584,0,236,112),i.cutOut("pipe-red-top",0,646,52,320),i.cutOut("pipe-red-bottom",56,646,52,320),i.cutOut("pipe-green-bottom",168,646,52,320),i.cutOut("pipe-green-top",112,646,52,320),i.cutOut("score-board",4,516,232,123),i.cutOut("coin-dull-metal",224,906,44,44),i.cutOut("coin-dull-bronze",224,954,44,44),i.cutOut("coin-shine-silver",242,516,44,44),i.cutOut("coin-shine-gold",242,564,44,44),i.cutOut("number-sm-0",276,646,12,14),i.cutOut("number-sm-1",282,664,6,14),i.cutOut("number-sm-2",276,698,12,14),i.cutOut("number-sm-3",276,716,12,14),i.cutOut("number-sm-4",276,750,12,14),i.cutOut("number-sm-5",276,768,12,14),i.cutOut("number-sm-6",276,802,12,14),i.cutOut("number-sm-7",276,820,12,14),i.cutOut("number.sm-8",276,854,12,14),i.cutOut("number-sm-9",276,872,12,14),i.cutOut("number-md-0",274,612,14,20),i.cutOut("number-md-1",278,954,10,20),i.cutOut("number-md-2",274,978,14,20),i.cutOut("number-md-3",262,1002,14,20),i.cutOut("number-md-4",1004,0,14,20),i.cutOut("number-md-5",1004,24,14,20),i.cutOut("number-md-6",1010,52,14,20),i.cutOut("number-md-7",1010,84,14,20),i.cutOut("number-md-8",586,484,14,20),i.cutOut("number-md-9",622,412,14,20),i.cutOut("number-lg-0",992,120,24,36),i.cutOut("number-lg-1",272,910,16,36),i.cutOut("number-lg-2",584,320,24,36),i.cutOut("number-lg-3",612,320,24,36),i.cutOut("number-lg-4",640,320,24,36),i.cutOut("number-lg-5",668,320,24,36),i.cutOut("number-lg-6",584,368,24,36),i.cutOut("number-lg-7",612,368,24,36),i.cutOut("number-lg-8",640,368,24,36),i.cutOut("number-lg-9",668,368,24,36),i.cutOut("toast-new",224,1002,32,14),i.cutOut("btn-pause",242,612,26,28),i.cutOut("btn-share",584,284,80,28),i.cutOut("btn-play-icon",668,284,26,28),i.cutOut("btn-play",706,236,110,64),i.cutOut("btn-ranking",826,236,110,64),i.cutOut("btn-menu",924,52,80,28),i.cutOut("btn-ok",924,84,80,28),i.cutOut("btn-rate",926,2,70,44),i.cutOut("bird-yellow-up",6,982,34,24),i.cutOut("bird-yellow-mid",62,982,34,24),i.cutOut("bird-yellow-down",118,982,34,24),i.cutOut("bird-blue-up",174,982,34,24),i.cutOut("bird-blue-mid",230,658,34,24),i.cutOut("bird-blue-down",230,710,34,24),i.cutOut("bird-red-up",230,762,34,24),i.cutOut("bird-red-mid",230,814,34,24),i.cutOut("bird-red-down",230,866,34,24),i.cutOut("spark-sm",276,682,10,10),i.cutOut("spark-md",276,734,10,10),i.cutOut("spark-lg",276,786,10,10),i.cutOut("banner-game-ready",586,118,192,58),i.cutOut("banner-game-over",786,118,200,52),i.cutOut("banner-flappybird",702,182,178,52),i.cutOut("banner-instruction",584,182,114,98),i.cutOut("copyright",886,184,122,10),i.cutOut("icon-plus",992,168,10,10),i.cutOut("btn-mute",816,306,90,66),i.cutOut("btn-speaker",712,306,90,66);var n=function(){e&&t(),e=!0};i.then(n),new A({hit:F,wing:W,swoosh:N,die:G,point:H},n)}))}((function(){ae=!0,re.init(),he(),Qt()(ce),window.setTimeout(ue,1e3)}))})),window.addEventListener("resize",(function(){ae&&he()}))})()})();